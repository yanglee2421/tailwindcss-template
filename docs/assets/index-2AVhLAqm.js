import{x as Pe,p as $e,D as Be,H as pe,N as Ne,u as ee,F as Te,G as ye,R as Ae,O as fe,S as Oe,_ as Le,W as ft,r as Ct,s as Ft,$ as lt,a0 as xt,n as It,a1 as Et,a2 as Rt,Z as ct,a3 as ot,U as St,V as Mt}from"./element-plus-hgTYpOXD.js";import{C as it}from"./cropperjs-o46FJETO.js";import{h as ze,_ as Tt}from"./main-gk-vjH92.js";import{f as We}from"./fabric-ljyZ2wJ6.js";function kt(R=0){return new Promise(E=>{setTimeout(E,R)})}const Pt=Pe({inheritAttrs:!1,__name:"frame-btns",props:{showConfirm:{type:Boolean}},emits:["upload","confirm","back"],setup(R,{emit:E}){const T=R,f=E,e=ze(),{state:t}=e,u=$e(()=>[!T.showConfirm,t.result,t.tab<2].every(Boolean)),a=$e(()=>[!T.showConfirm,t.tab===1].every(Boolean)),p=$e(()=>t.tab===2),w=$e(()=>[t.tab===1,t.upload,!T.showConfirm].every(Boolean)),r=()=>{t.tab<2&&t.tab++},o=i=>{f("upload",i)},n=async()=>{t.loading=!0;const i=document.createElement("a");i.href=t.result,i.download=`${Date.now()}.png`,i.click(),await kt(500),t.loading=!1};return(i,h)=>{const _=Be("icon-camera"),x=Be("el-button"),v=Be("icon-download");return pe(),Ne(ft,null,[ee(a)?(pe(),Te(x,{key:0,color:"#9344ec",round:"",tag:"label",class:"bg-[#9344ec]"},{icon:ye(()=>[Ae(_,{class:"w-4"})]),default:ye(()=>[fe("input",{onChange:o,type:"file",hidden:"",value:""},null,32),Oe(" Upload a photo")]),_:1})):Le("",!0),ee(w)?(pe(),Te(x,{key:1,onClick:h[0]||(h[0]=O=>f("back")),color:"#9344ec",round:"",tag:"label",class:"bg-[#9344ec]"},{default:ye(()=>[Oe("Back")]),_:1})):Le("",!0),i.showConfirm?(pe(),Te(x,{key:2,onClick:h[1]||(h[1]=O=>f("confirm")),loading:ee(t).loading,round:"",tag:"label",color:"#9344ec",class:"bg-[#9344ec]"},{default:ye(()=>[Oe("Confirm")]),_:1},8,["loading"])):Le("",!0),ee(p)?(pe(),Te(x,{key:3,onClick:n,loading:ee(t).loading,round:"",tag:"label",color:"#9344ec",class:"bg-[#9344ec]"},{icon:ye(()=>[Ae(v)]),default:ye(()=>[Oe(" Download a Photo ")]),_:1},8,["loading"])):Le("",!0),ee(u)?(pe(),Te(x,{key:4,onClick:r,round:"",tag:"label",color:"#9344ec",class:"bg-[#9344ec]"},{default:ye(()=>[Oe("Next >")]),_:1})):Le("",!0)],64)}}});function Dt(R,E){return E.forEach(function(T){T&&typeof T!="string"&&!Array.isArray(T)&&Object.keys(T).forEach(function(f){if(f!=="default"&&!(f in R)){var e=Object.getOwnPropertyDescriptor(T,f);Object.defineProperty(R,f,e.get?e:{enumerable:!0,get:function(){return T[f]}})}})}),Object.freeze(R)}function ut(R,E){return new Promise(function(T,f){let e;return Ht(R).then(function(t){try{return e=t,T(new Blob([E.slice(0,2),e,E.slice(2)],{type:"image/jpeg"}))}catch(u){return f(u)}},f)})}const Ht=R=>new Promise((E,T)=>{const f=new FileReader;f.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let u=0;if(t.getUint16(u)!==65496)return T("not a valid JPEG");for(u+=2;;){const a=t.getUint16(u);if(a===65498)break;const p=t.getUint16(u+2);if(a===65505&&t.getUint32(u+4)===1165519206){const w=u+10;let r;switch(t.getUint16(w)){case 18761:r=!0;break;case 19789:r=!1;break;default:return T("TIFF header contains invalid endian")}if(t.getUint16(w+2,r)!==42)return T("TIFF header contains invalid version");const o=t.getUint32(w+4,r),n=w+o+2+12*t.getUint16(w+o,r);for(let i=w+o+2;i<n;i+=12)if(t.getUint16(i,r)==274){if(t.getUint16(i+2,r)!==3)return T("Orientation data type is invalid");if(t.getUint32(i+4,r)!==1)return T("Orientation data count is invalid");t.setUint16(i+8,1,r);break}return E(e.slice(u,u+2+p))}u+=2+p}return E(new Blob)}),f.readAsArrayBuffer(R)});var Ge={},Ot={get exports(){return Ge},set exports(R){Ge=R}};(function(R){var E,T,f={};Ot.exports=f,f.parse=function(e,t){for(var u=f.bin.readUshort,a=f.bin.readUint,p=0,w={},r=new Uint8Array(e),o=r.length-4;a(r,o)!=101010256;)o--;p=o,p+=4;var n=u(r,p+=4);u(r,p+=2);var i=a(r,p+=2),h=a(r,p+=4);p+=4,p=h;for(var _=0;_<n;_++){a(r,p),p+=4,p+=4,p+=4,a(r,p+=4),i=a(r,p+=4);var x=a(r,p+=4),v=u(r,p+=4),O=u(r,p+2),k=u(r,p+4);p+=6;var I=a(r,p+=8);p+=4,p+=v+O+k,f._readLocal(r,I,w,i,x,t)}return w},f._readLocal=function(e,t,u,a,p,w){var r=f.bin.readUshort,o=f.bin.readUint;o(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);o(e,t+=2),o(e,t+=4),t+=4;var i=r(e,t+=8),h=r(e,t+=2);t+=2;var _=f.bin.readUTF8(e,t,i);if(t+=i,t+=h,w)u[_]={size:p,csize:a};else{var x=new Uint8Array(e.buffer,t);if(n==0)u[_]=new Uint8Array(x.buffer.slice(t,t+a));else{if(n!=8)throw"unknown compression method: "+n;var v=new Uint8Array(p);f.inflateRaw(x,v),u[_]=v}}},f.inflateRaw=function(e,t){return f.F.inflate(e,t)},f.inflate=function(e,t){return e[0],e[1],f.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},f.deflate=function(e,t){t==null&&(t={level:6});var u=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[u]=120,a[u+1]=156,u+=2,u=f.F.deflateRaw(e,a,u,t.level);var p=f.adler(e,0,e.length);return a[u+0]=p>>>24&255,a[u+1]=p>>>16&255,a[u+2]=p>>>8&255,a[u+3]=p>>>0&255,new Uint8Array(a.buffer,0,u+4)},f.deflateRaw=function(e,t){t==null&&(t={level:6});var u=new Uint8Array(50+Math.floor(1.1*e.length)),a=f.F.deflateRaw(e,u,a,t.level);return new Uint8Array(u.buffer,0,a)},f.encode=function(e,t){t==null&&(t=!1);var u=0,a=f.bin.writeUint,p=f.bin.writeUshort,w={};for(var r in e){var o=!f._noNeed(r)&&!t,n=e[r],i=f.crc.crc(n,0,n.length);w[r]={cpr:o,usize:n.length,crc:i,file:o?f.deflateRaw(n):n}}for(var r in w)u+=w[r].file.length+30+46+2*f.bin.sizeUTF8(r);u+=22;var h=new Uint8Array(u),_=0,x=[];for(var r in w){var v=w[r];x.push(_),_=f._writeHeader(h,_,r,v,0)}var O=0,k=_;for(var r in w)v=w[r],x.push(_),_=f._writeHeader(h,_,r,v,1,x[O++]);var I=_-k;return a(h,_,101010256),_+=4,p(h,_+=4,O),p(h,_+=2,O),a(h,_+=2,I),a(h,_+=4,k),_+=4,_+=2,h.buffer},f._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},f._writeHeader=function(e,t,u,a,p,w){var r=f.bin.writeUint,o=f.bin.writeUshort,n=a.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),o(e,t,20),o(e,t+=2,0),o(e,t+=2,a.cpr?8:0),r(e,t+=2,0),r(e,t+=4,a.crc),r(e,t+=4,n.length),r(e,t+=4,a.usize),o(e,t+=4,f.bin.sizeUTF8(u)),o(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,w),t+=4),t+=f.bin.writeUTF8(e,t,u),p==0&&(e.set(n,t),t+=n.length),t},f.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var u=t,a=0;a<8;a++)1&u?u=3988292384^u>>>1:u>>>=1;e[t]=u}return e}(),update:function(e,t,u,a){for(var p=0;p<a;p++)e=f.crc.table[255&(e^t[u+p])]^e>>>8;return e},crc:function(e,t,u){return 4294967295^f.crc.update(4294967295,e,t,u)}},f.adler=function(e,t,u){for(var a=1,p=0,w=t,r=t+u;w<r;){for(var o=Math.min(w+5552,r);w<o;)p+=a+=e[w++];a%=65521,p%=65521}return p<<16|a},f.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,u){e[t]=255&u,e[t+1]=u>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,u){e[t]=255&u,e[t+1]=u>>8&255,e[t+2]=u>>16&255,e[t+3]=u>>24&255},readASCII:function(e,t,u){for(var a="",p=0;p<u;p++)a+=String.fromCharCode(e[t+p]);return a},writeASCII:function(e,t,u){for(var a=0;a<u.length;a++)e[t+a]=u.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,u){for(var a,p="",w=0;w<u;w++)p+="%"+f.bin.pad(e[t+w].toString(16));try{a=decodeURIComponent(p)}catch{return f.bin.readASCII(e,t,u)}return a},writeUTF8:function(e,t,u){for(var a=u.length,p=0,w=0;w<a;w++){var r=u.charCodeAt(w);if(!(4294967168&r))e[t+p]=r,p++;else if(!(4294965248&r))e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if(!(4294901760&r))e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if(4292870144&r)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,u=0,a=0;a<t;a++){var p=e.charCodeAt(a);if(!(4294967168&p))u++;else if(!(4294965248&p))u+=2;else if(!(4294901760&p))u+=3;else{if(4292870144&p)throw"e";u+=4}}return u}},f.F={},f.F.deflateRaw=function(e,t,u,a){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],w=f.F.U,r=f.F._goodIndex;f.F._hash;var o=f.F._putsE,n=0,i=u<<3,h=0,_=e.length;if(a==0){for(;n<_;)o(t,i,n+(A=Math.min(65535,_-n))==_?1:0),i=f.F._copyExact(e,n,A,t,i+8),n+=A;return i>>>3}var x=w.lits,v=w.strt,O=w.prev,k=0,I=0,D=0,g=0,S=0,c=0;for(_>2&&(v[c=f.F._hash(e,0)]=0),n=0;n<_;n++){if(S=c,n+1<_-2){c=f.F._hash(e,n+1);var l=n+1&32767;O[l]=v[c],v[c]=l}if(h<=n){(k>14e3||I>26697)&&_-n>100&&(h<n&&(x[k]=n-h,k+=2,h=n),i=f.F._writeBlock(n==_-1||h==_?1:0,x,k,g,e,D,n-D,t,i),k=I=g=0,D=n);var b=0;n<_-2&&(b=f.F._bestMatch(e,n,O,S,Math.min(p[2],_-n),p[3]));var A=b>>>16,y=65535&b;if(b!=0){y=65535&b;var U=r(A=b>>>16,w.of0);w.lhst[257+U]++;var m=r(y,w.df0);w.dhst[m]++,g+=w.exb[U]+w.dxb[m],x[k]=A<<23|n-h,x[k+1]=y<<16|U<<8|m,k+=2,h=n+A}else w.lhst[e[n]]++;I++}}for(D==n&&e.length!=0||(h<n&&(x[k]=n-h,k+=2,h=n),i=f.F._writeBlock(1,x,k,g,e,D,n-D,t,i),k=0,I=0,k=I=g=0,D=n);7&i;)i++;return i>>>3},f.F._bestMatch=function(e,t,u,a,p,w){var r=32767&t,o=u[r],n=r-o+32768&32767;if(o==r||a!=f.F._hash(e,t-n))return 0;for(var i=0,h=0,_=Math.min(32767,t);n<=_&&--w!=0&&o!=r;){if(i==0||e[t+i]==e[t+i-n]){var x=f.F._howLong(e,t,n);if(x>i){if(h=n,(i=x)>=p)break;n+2<x&&(x=n+2);for(var v=0,O=0;O<x-2;O++){var k=t-n+O+32768&32767,I=k-u[k]+32768&32767;I>v&&(v=I,o=k)}}}n+=(r=o)-(o=u[r])+32768&32767}return i<<16|h},f.F._howLong=function(e,t,u){if(e[t]!=e[t-u]||e[t+1]!=e[t+1-u]||e[t+2]!=e[t+2-u])return 0;var a=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-u];)t++;return t-a},f.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},f.saved=0,f.F._writeBlock=function(e,t,u,a,p,w,r,o,n){var i,h,_,x,v,O,k,I,D,g=f.F.U,S=f.F._putsF,c=f.F._putsE;g.lhst[256]++,h=(i=f.F.getTrees())[0],_=i[1],x=i[2],v=i[3],O=i[4],k=i[5],I=i[6],D=i[7];var l=32+(n+3&7?8-(n+3&7):0)+(r<<3),b=a+f.F.contSize(g.fltree,g.lhst)+f.F.contSize(g.fdtree,g.dhst),A=a+f.F.contSize(g.ltree,g.lhst)+f.F.contSize(g.dtree,g.dhst);A+=14+3*k+f.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var y=0;y<286;y++)g.lhst[y]=0;for(y=0;y<30;y++)g.dhst[y]=0;for(y=0;y<19;y++)g.ihst[y]=0;var U=l<b&&l<A?0:b<A?1:2;if(S(o,n,e),S(o,n+1,U),n+=3,U==0){for(;7&n;)n++;n=f.F._copyExact(p,w,r,o,n)}else{var m,F;if(U==1&&(m=g.fltree,F=g.fdtree),U==2){f.F.makeCodes(g.ltree,h),f.F.revCodes(g.ltree,h),f.F.makeCodes(g.dtree,_),f.F.revCodes(g.dtree,_),f.F.makeCodes(g.itree,x),f.F.revCodes(g.itree,x),m=g.ltree,F=g.dtree,c(o,n,v-257),c(o,n+=5,O-1),c(o,n+=5,k-4),n+=4;for(var d=0;d<k;d++)c(o,n+3*d,g.itree[1+(g.ordr[d]<<1)]);n+=3*k,n=f.F._codeTiny(I,g.itree,o,n),n=f.F._codeTiny(D,g.itree,o,n)}for(var s=w,P=0;P<u;P+=2){for(var C=t[P],H=C>>>23,z=s+(8388607&C);s<z;)n=f.F._writeLit(p[s++],m,o,n);if(H!=0){var B=t[P+1],N=B>>16,L=B>>8&255,M=255&B;c(o,n=f.F._writeLit(257+L,m,o,n),H-g.of0[L]),n+=g.exb[L],S(o,n=f.F._writeLit(M,F,o,n),N-g.df0[M]),n+=g.dxb[M],s+=H}}n=f.F._writeLit(256,m,o,n)}return n},f.F._copyExact=function(e,t,u,a,p){var w=p>>>3;return a[w]=u,a[w+1]=u>>>8,a[w+2]=255-a[w],a[w+3]=255-a[w+1],w+=4,a.set(new Uint8Array(e.buffer,t,u),w),p+(u+4<<3)},f.F.getTrees=function(){for(var e=f.F.U,t=f.F._hufTree(e.lhst,e.ltree,15),u=f.F._hufTree(e.dhst,e.dtree,15),a=[],p=f.F._lenCodes(e.ltree,a),w=[],r=f.F._lenCodes(e.dtree,w),o=0;o<a.length;o+=2)e.ihst[a[o]]++;for(o=0;o<w.length;o+=2)e.ihst[w[o]]++;for(var n=f.F._hufTree(e.ihst,e.itree,7),i=19;i>4&&e.itree[1+(e.ordr[i-1]<<1)]==0;)i--;return[t,u,n,p,r,i,a,w]},f.F.getSecond=function(e){for(var t=[],u=0;u<e.length;u+=2)t.push(e[u+1]);return t},f.F.nonZero=function(e){for(var t="",u=0;u<e.length;u+=2)e[u+1]!=0&&(t+=(u>>1)+",");return t},f.F.contSize=function(e,t){for(var u=0,a=0;a<t.length;a++)u+=t[a]*e[1+(a<<1)];return u},f.F._codeTiny=function(e,t,u,a){for(var p=0;p<e.length;p+=2){var w=e[p],r=e[p+1];a=f.F._writeLit(w,t,u,a);var o=w==16?2:w==17?3:7;w>15&&(f.F._putsE(u,a,r,o),a+=o)}return a},f.F._lenCodes=function(e,t){for(var u=e.length;u!=2&&e[u-1]==0;)u-=2;for(var a=0;a<u;a+=2){var p=e[a+1],w=a+3<u?e[a+3]:-1,r=a+5<u?e[a+5]:-1,o=a==0?-1:e[a-1];if(p==0&&w==p&&r==p){for(var n=a+5;n+2<u&&e[n+2]==p;)n+=2;(i=Math.min(n+1-a>>>1,138))<11?t.push(17,i-3):t.push(18,i-11),a+=2*i-2}else if(p==o&&w==p&&r==p){for(n=a+5;n+2<u&&e[n+2]==p;)n+=2;var i=Math.min(n+1-a>>>1,6);t.push(16,i-3),a+=2*i-2}else t.push(p,0)}return u>>>1},f.F._hufTree=function(e,t,u){var a=[],p=e.length,w=t.length,r=0;for(r=0;r<w;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&a.push({lit:r,f:e[r]});var o=a.length,n=a.slice(0);if(o==0)return 0;if(o==1){var i=a[0].lit;return n=i==0?1:0,t[1+(i<<1)]=1,t[1+(n<<1)]=1,1}a.sort(function(I,D){return I.f-D.f});var h=a[0],_=a[1],x=0,v=1,O=2;for(a[0]={lit:-1,f:h.f+_.f,l:h,r:_,d:0};v!=o-1;)h=x!=v&&(O==o||a[x].f<a[O].f)?a[x++]:a[O++],_=x!=v&&(O==o||a[x].f<a[O].f)?a[x++]:a[O++],a[v++]={lit:-1,f:h.f+_.f,l:h,r:_};var k=f.F.setDepth(a[v-1],0);for(k>u&&(f.F.restrictDepth(n,u,k),k=u),r=0;r<o;r++)t[1+(n[r].lit<<1)]=n[r].d;return k},f.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(f.F.setDepth(e.l,t+1),f.F.setDepth(e.r,t+1))},f.F.restrictDepth=function(e,t,u){var a=0,p=1<<u-t,w=0;for(e.sort(function(o,n){return n.d==o.d?o.f-n.f:n.d-o.d}),a=0;a<e.length&&e[a].d>t;a++){var r=e[a].d;e[a].d=t,w+=p-(1<<u-r)}for(w>>>=u-t;w>0;)(r=e[a].d)<t?(e[a].d++,w-=1<<t-r-1):a++;for(;a>=0;a--)e[a].d==t&&w<0&&(e[a].d--,w++);w!=0&&console.log("debt left")},f.F._goodIndex=function(e,t){var u=0;return t[16|u]<=e&&(u|=16),t[8|u]<=e&&(u|=8),t[4|u]<=e&&(u|=4),t[2|u]<=e&&(u|=2),t[1|u]<=e&&(u|=1),u},f.F._writeLit=function(e,t,u,a){return f.F._putsF(u,a,t[e<<1]),a+t[1+(e<<1)]},f.F.inflate=function(e,t){var u=Uint8Array;if(e[0]==3&&e[1]==0)return t||new u(0);var a=f.F,p=a._bitsF,w=a._bitsE,r=a._decodeTiny,o=a.makeCodes,n=a.codes2map,i=a._get17,h=a.U,_=t==null;_&&(t=new u(e.length>>>2<<3));for(var x,v,O=0,k=0,I=0,D=0,g=0,S=0,c=0,l=0,b=0;O==0;)if(O=p(e,b,1),k=p(e,b+1,2),b+=3,k!=0){if(_&&(t=f.F._check(t,l+(1<<17))),k==1&&(x=h.flmap,v=h.fdmap,S=511,c=31),k==2){I=w(e,b,5)+257,D=w(e,b+5,5)+1,g=w(e,b+10,4)+4,b+=14;for(var A=0;A<38;A+=2)h.itree[A]=0,h.itree[A+1]=0;var y=1;for(A=0;A<g;A++){var U=w(e,b+3*A,3);h.itree[1+(h.ordr[A]<<1)]=U,U>y&&(y=U)}b+=3*g,o(h.itree,y),n(h.itree,y,h.imap),x=h.lmap,v=h.dmap,b=r(h.imap,(1<<y)-1,I+D,e,b,h.ttree);var m=a._copyOut(h.ttree,0,I,h.ltree);S=(1<<m)-1;var F=a._copyOut(h.ttree,I,D,h.dtree);c=(1<<F)-1,o(h.ltree,m),n(h.ltree,m,x),o(h.dtree,F),n(h.dtree,F,v)}for(;;){var d=x[i(e,b)&S];b+=15&d;var s=d>>>4;if(!(s>>>8))t[l++]=s;else{if(s==256)break;var P=l+s-254;if(s>264){var C=h.ldef[s-257];P=l+(C>>>3)+w(e,b,7&C),b+=7&C}var H=v[i(e,b)&c];b+=15&H;var z=H>>>4,B=h.ddef[z],N=(B>>>4)+p(e,b,15&B);for(b+=15&B,_&&(t=f.F._check(t,l+(1<<17)));l<P;)t[l]=t[l++-N],t[l]=t[l++-N],t[l]=t[l++-N],t[l]=t[l++-N];l=P}}}else{7&b&&(b+=8-(7&b));var L=4+(b>>>3),M=e[L-4]|e[L-3]<<8;_&&(t=f.F._check(t,l+M)),t.set(new u(e.buffer,e.byteOffset+L,M),l),b=L+M<<3,l+=M}return t.length==l?t:t.slice(0,l)},f.F._check=function(e,t){var u=e.length;if(t<=u)return e;var a=new Uint8Array(Math.max(u<<1,t));return a.set(e,0),a},f.F._decodeTiny=function(e,t,u,a,p,w){for(var r=f.F._bitsE,o=f.F._get17,n=0;n<u;){var i=e[o(a,p)&t];p+=15&i;var h=i>>>4;if(h<=15)w[n]=h,n++;else{var _=0,x=0;h==16?(x=3+r(a,p,2),p+=2,_=w[n-1]):h==17?(x=3+r(a,p,3),p+=3):h==18&&(x=11+r(a,p,7),p+=7);for(var v=n+x;n<v;)w[n]=_,n++}}return p},f.F._copyOut=function(e,t,u,a){for(var p=0,w=0,r=a.length>>>1;w<u;){var o=e[w+t];a[w<<1]=0,a[1+(w<<1)]=o,o>p&&(p=o),w++}for(;w<r;)a[w<<1]=0,a[1+(w<<1)]=0,w++;return p},f.F.makeCodes=function(e,t){for(var u,a,p,w,r=f.F.U,o=e.length,n=r.bl_count,i=0;i<=t;i++)n[i]=0;for(i=1;i<o;i+=2)n[e[i]]++;var h=r.next_code;for(u=0,n[0]=0,a=1;a<=t;a++)u=u+n[a-1]<<1,h[a]=u;for(p=0;p<o;p+=2)(w=e[p+1])!=0&&(e[p]=h[w],h[w]++)},f.F.codes2map=function(e,t,u){for(var a=e.length,p=f.F.U.rev15,w=0;w<a;w+=2)if(e[w+1]!=0)for(var r=w>>1,o=e[w+1],n=r<<4|o,i=t-o,h=e[w]<<i,_=h+(1<<i);h!=_;)u[p[h]>>>15-t]=n,h++},f.F.revCodes=function(e,t){for(var u=f.F.U.rev15,a=15-t,p=0;p<e.length;p+=2){var w=e[p]<<t-e[p+1];e[p]=u[w]>>>a}},f.F._putsE=function(e,t,u){u<<=7&t;var a=t>>>3;e[a]|=u,e[a+1]|=u>>>8},f.F._putsF=function(e,t,u){u<<=7&t;var a=t>>>3;e[a]|=u,e[a+1]|=u>>>8,e[a+2]|=u>>>16},f.F._bitsE=function(e,t,u){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<u)-1},f.F._bitsF=function(e,t,u){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<u)-1},f.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},f.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},f.F.U=(E=Uint16Array,T=Uint32Array,{next_code:new E(16),bl_count:new E(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new E(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new T(32),flmap:new E(512),fltree:[],fdmap:new E(32),fdtree:[],lmap:new E(32768),ltree:[],ttree:[],dmap:new E(32768),dtree:[],imap:new E(512),itree:[],rev15:new E(32768),lhst:new T(286),dhst:new T(30),ihst:new T(19),lits:new T(15e3),strt:new E(65536),prev:new E(32768)}),function(){for(var e=f.F.U,t=0;t<32768;t++){var u=t;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,e.rev15[t]=(u>>>16|u<<16)>>>17}function a(p,w,r){for(;w--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),f.F.makeCodes(e.fltree,9),f.F.codes2map(e.fltree,9,e.flmap),f.F.revCodes(e.fltree,9),a(e.fdtree,32,5),f.F.makeCodes(e.fdtree,5),f.F.codes2map(e.fdtree,5,e.fdmap),f.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()})();var Lt=Dt({__proto__:null,default:Ge},[Ge]);const ge=function(){var R={nextZero(r,o){for(;r[o]!=0;)o++;return o},readUshort:(r,o)=>r[o]<<8|r[o+1],writeUshort(r,o,n){r[o]=n>>8&255,r[o+1]=255&n},readUint:(r,o)=>16777216*r[o]+(r[o+1]<<16|r[o+2]<<8|r[o+3]),writeUint(r,o,n){r[o]=n>>24&255,r[o+1]=n>>16&255,r[o+2]=n>>8&255,r[o+3]=255&n},readASCII(r,o,n){let i="";for(let h=0;h<n;h++)i+=String.fromCharCode(r[o+h]);return i},writeASCII(r,o,n){for(let i=0;i<n.length;i++)r[o+i]=n.charCodeAt(i)},readBytes(r,o,n){const i=[];for(let h=0;h<n;h++)i.push(r[o+h]);return i},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,o,n){let i,h="";for(let _=0;_<n;_++)h+=`%${R.pad(r[o+_].toString(16))}`;try{i=decodeURIComponent(h)}catch{return R.readASCII(r,o,n)}return i}};function E(r,o,n,i){const h=o*n,_=t(i),x=Math.ceil(o*_/8),v=new Uint8Array(4*h),O=new Uint32Array(v.buffer),{ctype:k}=i,{depth:I}=i,D=R.readUshort;if(k==6){const C=h<<2;if(I==8)for(var g=0;g<C;g+=4)v[g]=r[g],v[g+1]=r[g+1],v[g+2]=r[g+2],v[g+3]=r[g+3];if(I==16)for(g=0;g<C;g++)v[g]=r[g<<1]}else if(k==2){const C=i.tabs.tRNS;if(C==null){if(I==8)for(g=0;g<h;g++){var S=3*g;O[g]=255<<24|r[S+2]<<16|r[S+1]<<8|r[S]}if(I==16)for(g=0;g<h;g++)S=6*g,O[g]=255<<24|r[S+4]<<16|r[S+2]<<8|r[S]}else{var c=C[0];const H=C[1],z=C[2];if(I==8)for(g=0;g<h;g++){var l=g<<2;S=3*g,O[g]=255<<24|r[S+2]<<16|r[S+1]<<8|r[S],r[S]==c&&r[S+1]==H&&r[S+2]==z&&(v[l+3]=0)}if(I==16)for(g=0;g<h;g++)l=g<<2,S=6*g,O[g]=255<<24|r[S+4]<<16|r[S+2]<<8|r[S],D(r,S)==c&&D(r,S+2)==H&&D(r,S+4)==z&&(v[l+3]=0)}}else if(k==3){const C=i.tabs.PLTE,H=i.tabs.tRNS,z=H?H.length:0;if(I==1)for(var b=0;b<n;b++){var A=b*x,y=b*o;for(g=0;g<o;g++){l=y+g<<2;var U=3*(m=r[A+(g>>3)]>>7-((7&g)<<0)&1);v[l]=C[U],v[l+1]=C[U+1],v[l+2]=C[U+2],v[l+3]=m<z?H[m]:255}}if(I==2)for(b=0;b<n;b++)for(A=b*x,y=b*o,g=0;g<o;g++)l=y+g<<2,U=3*(m=r[A+(g>>2)]>>6-((3&g)<<1)&3),v[l]=C[U],v[l+1]=C[U+1],v[l+2]=C[U+2],v[l+3]=m<z?H[m]:255;if(I==4)for(b=0;b<n;b++)for(A=b*x,y=b*o,g=0;g<o;g++)l=y+g<<2,U=3*(m=r[A+(g>>1)]>>4-((1&g)<<2)&15),v[l]=C[U],v[l+1]=C[U+1],v[l+2]=C[U+2],v[l+3]=m<z?H[m]:255;if(I==8)for(g=0;g<h;g++){var m;l=g<<2,U=3*(m=r[g]),v[l]=C[U],v[l+1]=C[U+1],v[l+2]=C[U+2],v[l+3]=m<z?H[m]:255}}else if(k==4){if(I==8)for(g=0;g<h;g++){l=g<<2;var F=r[d=g<<1];v[l]=F,v[l+1]=F,v[l+2]=F,v[l+3]=r[d+1]}if(I==16)for(g=0;g<h;g++){var d;l=g<<2,F=r[d=g<<2],v[l]=F,v[l+1]=F,v[l+2]=F,v[l+3]=r[d+2]}}else if(k==0)for(c=i.tabs.tRNS?i.tabs.tRNS:-1,b=0;b<n;b++){const C=b*x,H=b*o;if(I==1)for(var s=0;s<o;s++){var P=(F=255*(r[C+(s>>>3)]>>>7-(7&s)&1))==255*c?0:255;O[H+s]=P<<24|F<<16|F<<8|F}else if(I==2)for(s=0;s<o;s++)P=(F=85*(r[C+(s>>>2)]>>>6-((3&s)<<1)&3))==85*c?0:255,O[H+s]=P<<24|F<<16|F<<8|F;else if(I==4)for(s=0;s<o;s++)P=(F=17*(r[C+(s>>>1)]>>>4-((1&s)<<2)&15))==17*c?0:255,O[H+s]=P<<24|F<<16|F<<8|F;else if(I==8)for(s=0;s<o;s++)P=(F=r[C+s])==c?0:255,O[H+s]=P<<24|F<<16|F<<8|F;else if(I==16)for(s=0;s<o;s++)F=r[C+(s<<1)],P=D(r,C+(s<<1))==c?0:255,O[H+s]=P<<24|F<<16|F<<8|F}return v}function T(r,o,n,i){const h=t(r),_=Math.ceil(n*h/8),x=new Uint8Array((_+1+r.interlace)*i);return o=r.tabs.CgBI?e(o,x):f(o,x),r.interlace==0?o=u(o,r,0,n,i):r.interlace==1&&(o=function(O,k){const I=k.width,D=k.height,g=t(k),S=g>>3,c=Math.ceil(I*g/8),l=new Uint8Array(D*c);let b=0;const A=[0,0,4,0,2,0,1],y=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],m=[8,8,4,4,2,2,1];let F=0;for(;F<7;){const s=U[F],P=m[F];let C=0,H=0,z=A[F];for(;z<D;)z+=s,H++;let B=y[F];for(;B<I;)B+=P,C++;const N=Math.ceil(C*g/8);u(O,k,b,C,H);let L=0,M=A[F];for(;M<D;){let Q=y[F],V=b+L*N<<3;for(;Q<I;){var d;if(g==1&&(d=(d=O[V>>3])>>7-(7&V)&1,l[M*c+(Q>>3)]|=d<<7-((7&Q)<<0)),g==2&&(d=(d=O[V>>3])>>6-(7&V)&3,l[M*c+(Q>>2)]|=d<<6-((3&Q)<<1)),g==4&&(d=(d=O[V>>3])>>4-(7&V)&15,l[M*c+(Q>>1)]|=d<<4-((1&Q)<<2)),g>=8){const W=M*c+Q*S;for(let $=0;$<S;$++)l[W+$]=O[(V>>3)+$]}V+=g,Q+=P}L++,M+=s}C*H!=0&&(b+=H*(1+N)),F+=1}return l}(o,r)),o}function f(r,o){return e(new Uint8Array(r.buffer,2,r.length-6),o)}var e=function(){const r={H:{}};return r.H.N=function(o,n){const i=Uint8Array;let h,_,x=0,v=0,O=0,k=0,I=0,D=0,g=0,S=0,c=0;if(o[0]==3&&o[1]==0)return n||new i(0);const l=r.H,b=l.b,A=l.e,y=l.R,U=l.n,m=l.A,F=l.Z,d=l.m,s=n==null;for(s&&(n=new i(o.length>>>2<<5));x==0;)if(x=b(o,c,1),v=b(o,c+1,2),c+=3,v!=0){if(s&&(n=r.H.W(n,S+(1<<17))),v==1&&(h=d.J,_=d.h,D=511,g=31),v==2){O=A(o,c,5)+257,k=A(o,c+5,5)+1,I=A(o,c+10,4)+4,c+=14;let C=1;for(var P=0;P<38;P+=2)d.Q[P]=0,d.Q[P+1]=0;for(P=0;P<I;P++){const B=A(o,c+3*P,3);d.Q[1+(d.X[P]<<1)]=B,B>C&&(C=B)}c+=3*I,U(d.Q,C),m(d.Q,C,d.u),h=d.w,_=d.d,c=y(d.u,(1<<C)-1,O+k,o,c,d.v);const H=l.V(d.v,0,O,d.C);D=(1<<H)-1;const z=l.V(d.v,O,k,d.D);g=(1<<z)-1,U(d.C,H),m(d.C,H,h),U(d.D,z),m(d.D,z,_)}for(;;){const C=h[F(o,c)&D];c+=15&C;const H=C>>>4;if(!(H>>>8))n[S++]=H;else{if(H==256)break;{let z=S+H-254;if(H>264){const Q=d.q[H-257];z=S+(Q>>>3)+A(o,c,7&Q),c+=7&Q}const B=_[F(o,c)&g];c+=15&B;const N=B>>>4,L=d.c[N],M=(L>>>4)+b(o,c,15&L);for(c+=15&L;S<z;)n[S]=n[S++-M],n[S]=n[S++-M],n[S]=n[S++-M],n[S]=n[S++-M];S=z}}}}else{7&c&&(c+=8-(7&c));const C=4+(c>>>3),H=o[C-4]|o[C-3]<<8;s&&(n=r.H.W(n,S+H)),n.set(new i(o.buffer,o.byteOffset+C,H),S),c=C+H<<3,S+=H}return n.length==S?n:n.slice(0,S)},r.H.W=function(o,n){const i=o.length;if(n<=i)return o;const h=new Uint8Array(i<<1);return h.set(o,0),h},r.H.R=function(o,n,i,h,_,x){const v=r.H.e,O=r.H.Z;let k=0;for(;k<i;){const I=o[O(h,_)&n];_+=15&I;const D=I>>>4;if(D<=15)x[k]=D,k++;else{let g=0,S=0;D==16?(S=3+v(h,_,2),_+=2,g=x[k-1]):D==17?(S=3+v(h,_,3),_+=3):D==18&&(S=11+v(h,_,7),_+=7);const c=k+S;for(;k<c;)x[k]=g,k++}}return _},r.H.V=function(o,n,i,h){let _=0,x=0;const v=h.length>>>1;for(;x<i;){const O=o[x+n];h[x<<1]=0,h[1+(x<<1)]=O,O>_&&(_=O),x++}for(;x<v;)h[x<<1]=0,h[1+(x<<1)]=0,x++;return _},r.H.n=function(o,n){const i=r.H.m,h=o.length;let _,x,v,O;const k=i.j;for(var I=0;I<=n;I++)k[I]=0;for(I=1;I<h;I+=2)k[o[I]]++;const D=i.K;for(_=0,k[0]=0,x=1;x<=n;x++)_=_+k[x-1]<<1,D[x]=_;for(v=0;v<h;v+=2)O=o[v+1],O!=0&&(o[v]=D[O],D[O]++)},r.H.A=function(o,n,i){const h=o.length,_=r.H.m.r;for(let x=0;x<h;x+=2)if(o[x+1]!=0){const v=x>>1,O=o[x+1],k=v<<4|O,I=n-O;let D=o[x]<<I;const g=D+(1<<I);for(;D!=g;)i[_[D]>>>15-n]=k,D++}},r.H.l=function(o,n){const i=r.H.m.r,h=15-n;for(let _=0;_<o.length;_+=2){const x=o[_]<<n-o[_+1];o[_]=i[x]>>>h}},r.H.M=function(o,n,i){i<<=7&n;const h=n>>>3;o[h]|=i,o[h+1]|=i>>>8},r.H.I=function(o,n,i){i<<=7&n;const h=n>>>3;o[h]|=i,o[h+1]|=i>>>8,o[h+2]|=i>>>16},r.H.e=function(o,n,i){return(o[n>>>3]|o[1+(n>>>3)]<<8)>>>(7&n)&(1<<i)-1},r.H.b=function(o,n,i){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16)>>>(7&n)&(1<<i)-1},r.H.Z=function(o,n){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(o,n){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16|o[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const o=Uint16Array,n=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new o(65536),g:new o(32768)}}(),function(){const o=r.H.m;for(var n=0;n<32768;n++){let h=n;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,o.r[n]=(h>>>16|h<<16)>>>17}function i(h,_,x){for(;_--!=0;)h.push(0,x)}for(n=0;n<32;n++)o.q[n]=o.S[n]<<3|o.T[n],o.c[n]=o.p[n]<<4|o.z[n];i(o._,144,8),i(o._,112,9),i(o._,24,7),i(o._,8,8),r.H.n(o._,9),r.H.A(o._,9,o.J),r.H.l(o._,9),i(o.$,32,5),r.H.n(o.$,5),r.H.A(o.$,5,o.h),r.H.l(o.$,5),i(o.Q,19,0),i(o.C,286,0),i(o.D,30,0),i(o.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function u(r,o,n,i,h){let _=t(o);const x=Math.ceil(i*_/8);let v,O;_=Math.ceil(_/8);let k=r[n],I=0;if(k>1&&(r[n]=[0,0,1][k-2]),k==3)for(I=_;I<x;I++)r[I+1]=r[I+1]+(r[I+1-_]>>>1)&255;for(let D=0;D<h;D++)if(v=n+D*x,O=v+D+1,k=r[O-1],I=0,k==0)for(;I<x;I++)r[v+I]=r[O+I];else if(k==1){for(;I<_;I++)r[v+I]=r[O+I];for(;I<x;I++)r[v+I]=r[O+I]+r[v+I-_]}else if(k==2)for(;I<x;I++)r[v+I]=r[O+I]+r[v+I-x];else if(k==3){for(;I<_;I++)r[v+I]=r[O+I]+(r[v+I-x]>>>1);for(;I<x;I++)r[v+I]=r[O+I]+(r[v+I-x]+r[v+I-_]>>>1)}else{for(;I<_;I++)r[v+I]=r[O+I]+a(0,r[v+I-x],0);for(;I<x;I++)r[v+I]=r[O+I]+a(r[v+I-_],r[v+I-x],r[v+I-_-x])}return r}function a(r,o,n){const i=r+o-n,h=i-r,_=i-o,x=i-n;return h*h<=_*_&&h*h<=x*x?r:_*_<=x*x?o:n}function p(r,o,n){n.width=R.readUint(r,o),o+=4,n.height=R.readUint(r,o),o+=4,n.depth=r[o],o++,n.ctype=r[o],o++,n.compress=r[o],o++,n.filter=r[o],o++,n.interlace=r[o],o++}function w(r,o,n,i,h,_,x,v,O){const k=Math.min(o,h),I=Math.min(n,_);let D=0,g=0;for(let F=0;F<I;F++)for(let d=0;d<k;d++)if(x>=0&&v>=0?(D=F*o+d<<2,g=(v+F)*h+x+d<<2):(D=(-v+F)*o-x+d<<2,g=F*h+d<<2),O==0)i[g]=r[D],i[g+1]=r[D+1],i[g+2]=r[D+2],i[g+3]=r[D+3];else if(O==1){var S=r[D+3]*.00392156862745098,c=r[D]*S,l=r[D+1]*S,b=r[D+2]*S,A=i[g+3]*(1/255),y=i[g]*A,U=i[g+1]*A,m=i[g+2]*A;const s=1-S,P=S+A*s,C=P==0?0:1/P;i[g+3]=255*P,i[g+0]=(c+y*s)*C,i[g+1]=(l+U*s)*C,i[g+2]=(b+m*s)*C}else if(O==2)S=r[D+3],c=r[D],l=r[D+1],b=r[D+2],A=i[g+3],y=i[g],U=i[g+1],m=i[g+2],S==A&&c==y&&l==U&&b==m?(i[g]=0,i[g+1]=0,i[g+2]=0,i[g+3]=0):(i[g]=c,i[g+1]=l,i[g+2]=b,i[g+3]=S);else if(O==3){if(S=r[D+3],c=r[D],l=r[D+1],b=r[D+2],A=i[g+3],y=i[g],U=i[g+1],m=i[g+2],S==A&&c==y&&l==U&&b==m)continue;if(S<220&&A>20)return!1}return!0}return{decode:function(o){const n=new Uint8Array(o);let i=8;const h=R,_=h.readUshort,x=h.readUint,v={tabs:{},frames:[]},O=new Uint8Array(n.length);let k,I=0,D=0;const g=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(n[S]!=g[S])throw"The input is not a PNG file!";for(;i<n.length;){const F=h.readUint(n,i);i+=4;const d=h.readASCII(n,i,4);if(i+=4,d=="IHDR")p(n,i,v);else if(d=="iCCP"){for(var c=i;n[c]!=0;)c++;h.readASCII(n,i,c-i),n[c+1];const s=n.slice(c+2,i+F);let P=null;try{P=f(s)}catch{P=e(s)}v.tabs[d]=P}else if(d=="CgBI")v.tabs[d]=n.slice(i,i+4);else if(d=="IDAT"){for(S=0;S<F;S++)O[I+S]=n[i+S];I+=F}else if(d=="acTL")v.tabs[d]={num_frames:x(n,i),num_plays:x(n,i+4)},k=new Uint8Array(n.length);else if(d=="fcTL"){D!=0&&((m=v.frames[v.frames.length-1]).data=T(v,k.slice(0,D),m.rect.width,m.rect.height),D=0);const s={x:x(n,i+12),y:x(n,i+16),width:x(n,i+4),height:x(n,i+8)};let P=_(n,i+22);P=_(n,i+20)/(P==0?100:P);const C={rect:s,delay:Math.round(1e3*P),dispose:n[i+24],blend:n[i+25]};v.frames.push(C)}else if(d=="fdAT"){for(S=0;S<F-4;S++)k[D+S]=n[i+S+4];D+=F-4}else if(d=="pHYs")v.tabs[d]=[h.readUint(n,i),h.readUint(n,i+4),n[i+8]];else if(d=="cHRM")for(v.tabs[d]=[],S=0;S<8;S++)v.tabs[d].push(h.readUint(n,i+4*S));else if(d=="tEXt"||d=="zTXt"){v.tabs[d]==null&&(v.tabs[d]={});var l=h.nextZero(n,i),b=h.readASCII(n,i,l-i),A=i+F-l-1;if(d=="tEXt")U=h.readASCII(n,l+1,A);else{var y=f(n.slice(l+2,l+2+A));U=h.readUTF8(y,0,y.length)}v.tabs[d][b]=U}else if(d=="iTXt"){v.tabs[d]==null&&(v.tabs[d]={}),l=0,c=i,l=h.nextZero(n,c),b=h.readASCII(n,c,l-c);const s=n[c=l+1];var U;n[c+1],c+=2,l=h.nextZero(n,c),h.readASCII(n,c,l-c),c=l+1,l=h.nextZero(n,c),h.readUTF8(n,c,l-c),A=F-((c=l+1)-i),s==0?U=h.readUTF8(n,c,A):(y=f(n.slice(c,c+A)),U=h.readUTF8(y,0,y.length)),v.tabs[d][b]=U}else if(d=="PLTE")v.tabs[d]=h.readBytes(n,i,F);else if(d=="hIST"){const s=v.tabs.PLTE.length/3;for(v.tabs[d]=[],S=0;S<s;S++)v.tabs[d].push(_(n,i+2*S))}else if(d=="tRNS")v.ctype==3?v.tabs[d]=h.readBytes(n,i,F):v.ctype==0?v.tabs[d]=_(n,i):v.ctype==2&&(v.tabs[d]=[_(n,i),_(n,i+2),_(n,i+4)]);else if(d=="gAMA")v.tabs[d]=h.readUint(n,i)/1e5;else if(d=="sRGB")v.tabs[d]=n[i];else if(d=="bKGD")v.ctype==0||v.ctype==4?v.tabs[d]=[_(n,i)]:v.ctype==2||v.ctype==6?v.tabs[d]=[_(n,i),_(n,i+2),_(n,i+4)]:v.ctype==3&&(v.tabs[d]=n[i]);else if(d=="IEND")break;i+=F,h.readUint(n,i),i+=4}var m;return D!=0&&((m=v.frames[v.frames.length-1]).data=T(v,k.slice(0,D),m.rect.width,m.rect.height)),v.data=T(v,O,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(o){const n=o.width,i=o.height;if(o.tabs.acTL==null)return[E(o.data,n,i,o).buffer];const h=[];o.frames[0].data==null&&(o.frames[0].data=o.data);const _=n*i*4,x=new Uint8Array(_),v=new Uint8Array(_),O=new Uint8Array(_);for(let I=0;I<o.frames.length;I++){const D=o.frames[I],g=D.rect.x,S=D.rect.y,c=D.rect.width,l=D.rect.height,b=E(D.data,c,l,o);if(I!=0)for(var k=0;k<_;k++)O[k]=x[k];if(D.blend==0?w(b,c,l,x,n,i,g,S,0):D.blend==1&&w(b,c,l,x,n,i,g,S,1),h.push(x.buffer.slice(0)),D.dispose!=0){if(D.dispose==1)w(v,c,l,x,n,i,g,S,0);else if(D.dispose==2)for(k=0;k<_;k++)x[k]=O[k]}}return h},_paeth:a,_copyTile:w,_bin:R}}();(function(){const{_copyTile:R}=ge,{_bin:E}=ge,T=ge._paeth;var f={table:function(){const c=new Uint32Array(256);for(let l=0;l<256;l++){let b=l;for(let A=0;A<8;A++)1&b?b=3988292384^b>>>1:b>>>=1;c[l]=b}return c}(),update(c,l,b,A){for(let y=0;y<A;y++)c=f.table[255&(c^l[b+y])]^c>>>8;return c},crc:(c,l,b)=>4294967295^f.update(4294967295,c,l,b)};function e(c,l,b,A){l[b]+=c[0]*A>>4,l[b+1]+=c[1]*A>>4,l[b+2]+=c[2]*A>>4,l[b+3]+=c[3]*A>>4}function t(c){return Math.max(0,Math.min(255,c))}function u(c,l){const b=c[0]-l[0],A=c[1]-l[1],y=c[2]-l[2],U=c[3]-l[3];return b*b+A*A+y*y+U*U}function a(c,l,b,A,y,U,m){m==null&&(m=1);const F=A.length,d=[];for(var s=0;s<F;s++){const M=A[s];d.push([M>>>0&255,M>>>8&255,M>>>16&255,M>>>24&255])}for(s=0;s<F;s++){let M=4294967295;for(var P=0,C=0;C<F;C++){var H=u(d[s],d[C]);C!=s&&H<M&&(M=H,P=C)}}const z=new Uint32Array(y.buffer),B=new Int16Array(l*b*4),N=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(s=0;s<N.length;s++)N[s]=255*((N[s]+.5)/16-.5);for(let M=0;M<b;M++)for(let Q=0;Q<l;Q++){var L;s=4*(M*l+Q),m!=2?L=[t(c[s]+B[s]),t(c[s+1]+B[s+1]),t(c[s+2]+B[s+2]),t(c[s+3]+B[s+3])]:(H=N[4*(3&M)+(3&Q)],L=[t(c[s]+H),t(c[s+1]+H),t(c[s+2]+H),t(c[s+3]+H)]),P=0;let V=16777215;for(C=0;C<F;C++){const j=u(L,d[C]);j<V&&(V=j,P=C)}const W=d[P],$=[L[0]-W[0],L[1]-W[1],L[2]-W[2],L[3]-W[3]];m==1&&(Q!=l-1&&e($,B,s+4,7),M!=b-1&&(Q!=0&&e($,B,s+4*l-4,3),e($,B,s+4*l,5),Q!=l-1&&e($,B,s+4*l+4,1))),U[s>>2]=P,z[s>>2]=A[P]}}function p(c,l,b,A,y){y==null&&(y={});const{crc:U}=f,m=E.writeUint,F=E.writeUshort,d=E.writeASCII;let s=8;const P=c.frames.length>1;let C,H=!1,z=33+(P?20:0);if(y.sRGB!=null&&(z+=13),y.pHYs!=null&&(z+=21),y.iCCP!=null&&(C=pako.deflate(y.iCCP),z+=21+C.length+4),c.ctype==3){for(var B=c.plte.length,N=0;N<B;N++)c.plte[N]>>>24!=255&&(H=!0);z+=8+3*B+4+(H?8+1*B+4:0)}for(var L=0;L<c.frames.length;L++)P&&(z+=38),z+=(W=c.frames[L]).cimg.length+12,L!=0&&(z+=4);z+=12;const M=new Uint8Array(z),Q=[137,80,78,71,13,10,26,10];for(N=0;N<8;N++)M[N]=Q[N];if(m(M,s,13),s+=4,d(M,s,"IHDR"),s+=4,m(M,s,l),s+=4,m(M,s,b),s+=4,M[s]=c.depth,s++,M[s]=c.ctype,s++,M[s]=0,s++,M[s]=0,s++,M[s]=0,s++,m(M,s,U(M,s-17,17)),s+=4,y.sRGB!=null&&(m(M,s,1),s+=4,d(M,s,"sRGB"),s+=4,M[s]=y.sRGB,s++,m(M,s,U(M,s-5,5)),s+=4),y.iCCP!=null){const $=13+C.length;m(M,s,$),s+=4,d(M,s,"iCCP"),s+=4,d(M,s,"ICC profile"),s+=11,s+=2,M.set(C,s),s+=C.length,m(M,s,U(M,s-($+4),$+4)),s+=4}if(y.pHYs!=null&&(m(M,s,9),s+=4,d(M,s,"pHYs"),s+=4,m(M,s,y.pHYs[0]),s+=4,m(M,s,y.pHYs[1]),s+=4,M[s]=y.pHYs[2],s++,m(M,s,U(M,s-13,13)),s+=4),P&&(m(M,s,8),s+=4,d(M,s,"acTL"),s+=4,m(M,s,c.frames.length),s+=4,m(M,s,y.loop!=null?y.loop:0),s+=4,m(M,s,U(M,s-12,12)),s+=4),c.ctype==3){for(m(M,s,3*(B=c.plte.length)),s+=4,d(M,s,"PLTE"),s+=4,N=0;N<B;N++){const $=3*N,j=c.plte[N],Z=255&j,te=j>>>8&255,Fe=j>>>16&255;M[s+$+0]=Z,M[s+$+1]=te,M[s+$+2]=Fe}if(s+=3*B,m(M,s,U(M,s-3*B-4,3*B+4)),s+=4,H){for(m(M,s,B),s+=4,d(M,s,"tRNS"),s+=4,N=0;N<B;N++)M[s+N]=c.plte[N]>>>24&255;s+=B,m(M,s,U(M,s-B-4,B+4)),s+=4}}let V=0;for(L=0;L<c.frames.length;L++){var W=c.frames[L];P&&(m(M,s,26),s+=4,d(M,s,"fcTL"),s+=4,m(M,s,V++),s+=4,m(M,s,W.rect.width),s+=4,m(M,s,W.rect.height),s+=4,m(M,s,W.rect.x),s+=4,m(M,s,W.rect.y),s+=4,F(M,s,A[L]),s+=2,F(M,s,1e3),s+=2,M[s]=W.dispose,s++,M[s]=W.blend,s++,m(M,s,U(M,s-30,30)),s+=4);const $=W.cimg;m(M,s,(B=$.length)+(L==0?0:4)),s+=4;const j=s;d(M,s,L==0?"IDAT":"fdAT"),s+=4,L!=0&&(m(M,s,V++),s+=4),M.set($,s),s+=B,m(M,s,U(M,j,s-j)),s+=4}return m(M,s,0),s+=4,d(M,s,"IEND"),s+=4,m(M,s,U(M,s-4,4)),s+=4,M.buffer}function w(c,l,b){for(let A=0;A<c.frames.length;A++){const y=c.frames[A];y.rect.width;const U=y.rect.height,m=new Uint8Array(U*y.bpl+U);y.cimg=i(y.img,U,y.bpp,y.bpl,m,l,b)}}function r(c,l,b,A,y){const U=y[0],m=y[1],F=y[2],d=y[3],s=y[4],P=y[5];let C=6,H=8,z=255;for(var B=0;B<c.length;B++){const re=new Uint8Array(c[B]);for(var N=re.length,L=0;L<N;L+=4)z&=re[L+3]}const M=z!=255,Q=function(X,G,ne,ae,K,ce){const J=[];for(var q=0;q<X.length;q++){const se=new Uint8Array(X[q]),he=new Uint32Array(se.buffer);var ue;let de=0,we=0,be=G,Ie=ne,Ze=ae?1:0;if(q!=0){const _t=ce||ae||q==1||J[q-2].dispose!=0?1:2;let Ke=0,nt=1e9;for(let De=0;De<_t;De++){var _e=new Uint8Array(X[q-1-De]);const Ut=new Uint32Array(X[q-1-De]);let Ue=G,Ce=ne,Me=-1,He=-1;for(let Ee=0;Ee<ne;Ee++)for(let Re=0;Re<G;Re++)he[oe=Ee*G+Re]!=Ut[oe]&&(Re<Ue&&(Ue=Re),Re>Me&&(Me=Re),Ee<Ce&&(Ce=Ee),Ee>He&&(He=Ee));Me==-1&&(Ue=Ce=Me=He=0),K&&((1&Ue)==1&&Ue--,(1&Ce)==1&&Ce--);const rt=(Me-Ue+1)*(He-Ce+1);rt<nt&&(nt=rt,Ke=De,de=Ue,we=Ce,be=Me-Ue+1,Ie=He-Ce+1)}_e=new Uint8Array(X[q-1-Ke]),Ke==1&&(J[q-1].dispose=2),ue=new Uint8Array(be*Ie*4),R(_e,G,ne,ue,be,Ie,-de,-we,0),Ze=R(se,G,ne,ue,be,Ie,-de,-we,3)?1:0,Ze==1?n(se,G,ne,ue,{x:de,y:we,width:be,height:Ie}):R(se,G,ne,ue,be,Ie,-de,-we,0)}else ue=se.slice(0);J.push({rect:{x:de,y:we,width:be,height:Ie},img:ue,blend:Ze,dispose:0})}if(ae)for(q=0;q<J.length;q++){if((xe=J[q]).blend==1)continue;const se=xe.rect,he=J[q-1].rect,de=Math.min(se.x,he.x),we=Math.min(se.y,he.y),be={x:de,y:we,width:Math.max(se.x+se.width,he.x+he.width)-de,height:Math.max(se.y+se.height,he.y+he.height)-we};J[q-1].dispose=1,q-1!=0&&o(X,G,ne,J,q-1,be,K),o(X,G,ne,J,q,be,K)}let Qe=0;if(X.length!=1)for(var oe=0;oe<J.length;oe++){var xe;Qe+=(xe=J[oe]).rect.width*xe.rect.height}return J}(c,l,b,U,m,F),V={},W=[],$=[];if(A!=0){const re=[];for(L=0;L<Q.length;L++)re.push(Q[L].img.buffer);const X=function(K){let ce=0;for(var J=0;J<K.length;J++)ce+=K[J].byteLength;const q=new Uint8Array(ce);let ue=0;for(J=0;J<K.length;J++){const _e=new Uint8Array(K[J]),Qe=_e.length;for(let oe=0;oe<Qe;oe+=4){let xe=_e[oe],se=_e[oe+1],he=_e[oe+2];const de=_e[oe+3];de==0&&(xe=se=he=0),q[ue+oe]=xe,q[ue+oe+1]=se,q[ue+oe+2]=he,q[ue+oe+3]=de}ue+=Qe}return q.buffer}(re),G=_(X,A);for(L=0;L<G.plte.length;L++)W.push(G.plte[L].est.rgba);let ne=0;for(L=0;L<Q.length;L++){const ae=(Z=Q[L]).img.length;var j=new Uint8Array(G.inds.buffer,ne>>2,ae>>2);$.push(j);const K=new Uint8Array(G.abuf,ne,ae);P&&a(Z.img,Z.rect.width,Z.rect.height,W,K,j),Z.img.set(K),ne+=ae}}else for(B=0;B<Q.length;B++){var Z=Q[B];const re=new Uint32Array(Z.img.buffer);var te=Z.rect.width;for(N=re.length,j=new Uint8Array(N),$.push(j),L=0;L<N;L++){const X=re[L];if(L!=0&&X==re[L-1])j[L]=j[L-1];else if(L>te&&X==re[L-te])j[L]=j[L-te];else{let G=V[X];if(G==null&&(V[X]=G=W.length,W.push(X),W.length>=300))break;j[L]=G}}}const Fe=W.length;for(Fe<=256&&s==0&&(H=Fe<=2?1:Fe<=4?2:Fe<=16?4:8,H=Math.max(H,d)),B=0;B<Q.length;B++){(Z=Q[B]).rect.x,Z.rect.y,te=Z.rect.width;const re=Z.rect.height;let X=Z.img;new Uint32Array(X.buffer);let G=4*te,ne=4;if(Fe<=256&&s==0){G=Math.ceil(H*te/8);var me=new Uint8Array(G*re);const ae=$[B];for(let K=0;K<re;K++){L=K*G;const ce=K*te;if(H==8)for(var Y=0;Y<te;Y++)me[L+Y]=ae[ce+Y];else if(H==4)for(Y=0;Y<te;Y++)me[L+(Y>>1)]|=ae[ce+Y]<<4-4*(1&Y);else if(H==2)for(Y=0;Y<te;Y++)me[L+(Y>>2)]|=ae[ce+Y]<<6-2*(3&Y);else if(H==1)for(Y=0;Y<te;Y++)me[L+(Y>>3)]|=ae[ce+Y]<<7-1*(7&Y)}X=me,C=3,ne=1}else if(M==0&&Q.length==1){me=new Uint8Array(te*re*3);const ae=te*re;for(L=0;L<ae;L++){const K=3*L,ce=4*L;me[K]=X[ce],me[K+1]=X[ce+1],me[K+2]=X[ce+2]}X=me,C=2,ne=3,G=3*te}Z.img=X,Z.bpl=G,Z.bpp=ne}return{ctype:C,depth:H,plte:W,frames:Q}}function o(c,l,b,A,y,U,m){const F=Uint8Array,d=Uint32Array,s=new F(c[y-1]),P=new d(c[y-1]),C=y+1<c.length?new F(c[y+1]):null,H=new F(c[y]),z=new d(H.buffer);let B=l,N=b,L=-1,M=-1;for(let V=0;V<U.height;V++)for(let W=0;W<U.width;W++){const $=U.x+W,j=U.y+V,Z=j*l+$,te=z[Z];te==0||A[y-1].dispose==0&&P[Z]==te&&(C==null||C[4*Z+3]!=0)||($<B&&(B=$),$>L&&(L=$),j<N&&(N=j),j>M&&(M=j))}L==-1&&(B=N=L=M=0),m&&((1&B)==1&&B--,(1&N)==1&&N--),U={x:B,y:N,width:L-B+1,height:M-N+1};const Q=A[y];Q.rect=U,Q.blend=1,Q.img=new Uint8Array(U.width*U.height*4),A[y-1].dispose==0?(R(s,l,b,Q.img,U.width,U.height,-U.x,-U.y,0),n(H,l,b,Q.img,U)):R(H,l,b,Q.img,U.width,U.height,-U.x,-U.y,0)}function n(c,l,b,A,y){R(c,l,b,A,y.width,y.height,-y.x,-y.y,2)}function i(c,l,b,A,y,U,m){const F=[];let d,s=[0,1,2,3,4];U!=-1?s=[U]:(l*A>5e5||b==1)&&(s=[0]),m&&(d={level:0});const P=Lt;for(var C=0;C<s.length;C++){for(let B=0;B<l;B++)h(y,c,B,A,b,s[C]);F.push(P.deflate(y,d))}let H,z=1e9;for(C=0;C<F.length;C++)F[C].length<z&&(H=C,z=F[C].length);return F[H]}function h(c,l,b,A,y,U){const m=b*A;let F=m+b;if(c[F]=U,F++,U==0)if(A<500)for(var d=0;d<A;d++)c[F+d]=l[m+d];else c.set(new Uint8Array(l.buffer,m,A),F);else if(U==1){for(d=0;d<y;d++)c[F+d]=l[m+d];for(d=y;d<A;d++)c[F+d]=l[m+d]-l[m+d-y]+256&255}else if(b==0){for(d=0;d<y;d++)c[F+d]=l[m+d];if(U==2)for(d=y;d<A;d++)c[F+d]=l[m+d];if(U==3)for(d=y;d<A;d++)c[F+d]=l[m+d]-(l[m+d-y]>>1)+256&255;if(U==4)for(d=y;d<A;d++)c[F+d]=l[m+d]-T(l[m+d-y],0,0)+256&255}else{if(U==2)for(d=0;d<A;d++)c[F+d]=l[m+d]+256-l[m+d-A]&255;if(U==3){for(d=0;d<y;d++)c[F+d]=l[m+d]+256-(l[m+d-A]>>1)&255;for(d=y;d<A;d++)c[F+d]=l[m+d]+256-(l[m+d-A]+l[m+d-y]>>1)&255}if(U==4){for(d=0;d<y;d++)c[F+d]=l[m+d]+256-T(0,l[m+d-A],0)&255;for(d=y;d<A;d++)c[F+d]=l[m+d]+256-T(l[m+d-y],l[m+d-A],l[m+d-y-A])&255}}}function _(c,l){const b=new Uint8Array(c),A=b.slice(0),y=new Uint32Array(A.buffer),U=x(A,l),m=U[0],F=U[1],d=b.length,s=new Uint8Array(d>>2);let P;if(b.length<2e7)for(var C=0;C<d;C+=4)P=v(m,H=b[C]*(1/255),z=b[C+1]*(1/255),B=b[C+2]*(1/255),N=b[C+3]*(1/255)),s[C>>2]=P.ind,y[C>>2]=P.est.rgba;else for(C=0;C<d;C+=4){var H=b[C]*.00392156862745098,z=b[C+1]*(1/255),B=b[C+2]*(1/255),N=b[C+3]*(1/255);for(P=m;P.left;)P=O(P.est,H,z,B,N)<=0?P.left:P.right;s[C>>2]=P.ind,y[C>>2]=P.est.rgba}return{abuf:A.buffer,inds:s,plte:F}}function x(c,l,b){b==null&&(b=1e-4);const A=new Uint32Array(c.buffer),y={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};y.bst=D(c,y.i0,y.i1),y.est=g(y.bst);const U=[y];for(;U.length<l;){let F=0,d=0;for(var m=0;m<U.length;m++)U[m].est.L>F&&(F=U[m].est.L,d=m);if(F<b)break;const s=U[d],P=k(c,A,s.i0,s.i1,s.est.e,s.est.eMq255);if(s.i0>=P||s.i1<=P){s.est.L=0;continue}const C={i0:s.i0,i1:P,bst:null,est:null,tdst:0,left:null,right:null};C.bst=D(c,C.i0,C.i1),C.est=g(C.bst);const H={i0:P,i1:s.i1,bst:null,est:null,tdst:0,left:null,right:null};for(H.bst={R:[],m:[],N:s.bst.N-C.bst.N},m=0;m<16;m++)H.bst.R[m]=s.bst.R[m]-C.bst.R[m];for(m=0;m<4;m++)H.bst.m[m]=s.bst.m[m]-C.bst.m[m];H.est=g(H.bst),s.left=C,s.right=H,U[d]=C,U.push(H)}for(U.sort((F,d)=>d.bst.N-F.bst.N),m=0;m<U.length;m++)U[m].ind=m;return[y,U]}function v(c,l,b,A,y){if(c.left==null)return c.tdst=function(C,H,z,B,N){const L=H-C[0],M=z-C[1],Q=B-C[2],V=N-C[3];return L*L+M*M+Q*Q+V*V}(c.est.q,l,b,A,y),c;const U=O(c.est,l,b,A,y);let m=c.left,F=c.right;U>0&&(m=c.right,F=c.left);const d=v(m,l,b,A,y);if(d.tdst<=U*U)return d;const s=v(F,l,b,A,y);return s.tdst<d.tdst?s:d}function O(c,l,b,A,y){const{e:U}=c;return U[0]*l+U[1]*b+U[2]*A+U[3]*y-c.eMq}function k(c,l,b,A,y,U){for(A-=4;b<A;){for(;I(c,b,y)<=U;)b+=4;for(;I(c,A,y)>U;)A-=4;if(b>=A)break;const m=l[b>>2];l[b>>2]=l[A>>2],l[A>>2]=m,b+=4,A-=4}for(;I(c,b,y)>U;)b-=4;return b+4}function I(c,l,b){return c[l]*b[0]+c[l+1]*b[1]+c[l+2]*b[2]+c[l+3]*b[3]}function D(c,l,b){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0],U=b-l>>2;for(let m=l;m<b;m+=4){const F=c[m]*.00392156862745098,d=c[m+1]*(1/255),s=c[m+2]*(1/255),P=c[m+3]*(1/255);y[0]+=F,y[1]+=d,y[2]+=s,y[3]+=P,A[0]+=F*F,A[1]+=F*d,A[2]+=F*s,A[3]+=F*P,A[5]+=d*d,A[6]+=d*s,A[7]+=d*P,A[10]+=s*s,A[11]+=s*P,A[15]+=P*P}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:y,N:U}}function g(c){const{R:l}=c,{m:b}=c,{N:A}=c,y=b[0],U=b[1],m=b[2],F=b[3],d=A==0?0:1/A,s=[l[0]-y*y*d,l[1]-y*U*d,l[2]-y*m*d,l[3]-y*F*d,l[4]-U*y*d,l[5]-U*U*d,l[6]-U*m*d,l[7]-U*F*d,l[8]-m*y*d,l[9]-m*U*d,l[10]-m*m*d,l[11]-m*F*d,l[12]-F*y*d,l[13]-F*U*d,l[14]-F*m*d,l[15]-F*F*d],P=s,C=S;let H=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,B=0;if(A!=0)for(let L=0;L<16&&(H=C.multVec(P,H),B=Math.sqrt(C.dot(H,H)),H=C.sml(1/B,H),!(L!=0&&Math.abs(B-z)<1e-9));L++)z=B;const N=[y*d,U*d,m*d,F*d];return{Cov:s,q:N,e:H,L:z,eMq255:C.dot(C.sml(255,N),H),eMq:C.dot(H,N),rgba:(Math.round(255*N[3])<<24|Math.round(255*N[2])<<16|Math.round(255*N[1])<<8|Math.round(255*N[0])<<0)>>>0}}var S={multVec:(c,l)=>[c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3],c[4]*l[0]+c[5]*l[1]+c[6]*l[2]+c[7]*l[3],c[8]*l[0]+c[9]*l[1]+c[10]*l[2]+c[11]*l[3],c[12]*l[0]+c[13]*l[1]+c[14]*l[2]+c[15]*l[3]],dot:(c,l)=>c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3],sml:(c,l)=>[c*l[0],c*l[1],c*l[2],c*l[3]]};ge.encode=function(l,b,A,y,U,m,F){y==null&&(y=0),F==null&&(F=!1);const d=r(l,b,A,y,[!1,!1,!1,0,F,!1]);return w(d,-1),p(d,b,A,U,m)},ge.encodeLL=function(l,b,A,y,U,m,F,d){const s={ctype:0+(y==1?0:2)+(U==0?0:4),depth:m,frames:[]},P=(y+U)*m,C=P*b;for(let H=0;H<l.length;H++)s.frames.push({rect:{x:0,y:0,width:b,height:A},img:new Uint8Array(l[H]),blend:0,dispose:1,bpp:Math.ceil(P/8),bpl:Math.ceil(C/8)});return w(s,0,!0),p(s,b,A,F,d)},ge.encode.compress=r,ge.encode.dither=a,ge.quantize=_,ge.quantize.getKDtree=x,ge.quantize.getNearest=v})();const dt={toArrayBuffer(R,E){const T=R.width,f=R.height,e=T<<2,t=R.getContext("2d").getImageData(0,0,T,f),u=new Uint32Array(t.data.buffer),a=(32*T+31)/32<<2,p=a*f,w=122+p,r=new ArrayBuffer(w),o=new DataView(r),n=1<<20;let i,h,_,x,v=n,O=0,k=0,I=0;function D(c){o.setUint16(k,c,!0),k+=2}function g(c){o.setUint32(k,c,!0),k+=4}function S(c){k+=c}D(19778),g(w),S(4),g(122),g(108),g(T),g(-f>>>0),D(1),D(32),g(3),g(p),g(2835),g(2835),S(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),function c(){for(;O<f&&v>0;){for(x=122+O*a,i=0;i<e;)v--,h=u[I++],_=h>>>24,o.setUint32(x+i,h<<8|_),i+=4;O++}I<u.length?(v=n,setTimeout(c,dt._dly)):E(r)}()},toBlob(R,E){this.toArrayBuffer(R,T=>{E(new Blob([T],{type:"image/bmp"}))})},_dly:9};var le={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Bt={[le.CHROME]:16384,[le.FIREFOX]:11180,[le.DESKTOP_SAFARI]:16384,[le.IE]:8192,[le.IOS]:4096,[le.ETC]:8192};const et=typeof window<"u",ht=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,qe=et&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Nt=(et||ht)&&(qe&&qe.getOriginalSymbol(window,"File")||typeof File<"u"&&File),gt=(et||ht)&&(qe&&qe.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function tt(R,E,T=Date.now()){return new Promise(f=>{const e=R.split(","),t=e[0].match(/:(.*?);/)[1],u=globalThis.atob(e[1]);let a=u.length;const p=new Uint8Array(a);for(;a--;)p[a]=u.charCodeAt(a);const w=new Blob([p],{type:t});w.name=E,w.lastModified=T,f(w)})}function pt(R){return new Promise((E,T)=>{const f=new gt;f.onload=()=>E(f.result),f.onerror=e=>T(e),f.readAsDataURL(R)})}function mt(R){return new Promise((E,T)=>{const f=new Image;f.onload=()=>E(f),f.onerror=e=>T(e),f.src=R})}function Se(){if(Se.cachedResult!==void 0)return Se.cachedResult;let R=le.ETC;const{userAgent:E}=navigator;return/Chrom(e|ium)/i.test(E)?R=le.CHROME:/iP(ad|od|hone)/i.test(E)&&/WebKit/i.test(E)?R=le.IOS:/Safari/i.test(E)?R=le.DESKTOP_SAFARI:/Firefox/i.test(E)?R=le.FIREFOX:(/MSIE/i.test(E)||document.documentMode)&&(R=le.IE),Se.cachedResult=R,Se.cachedResult}function bt(R,E){const T=Se(),f=Bt[T];let e=R,t=E,u=e*t;const a=e>t?t/e:e/t;for(;u>f*f;){const p=(f+e)/2,w=(f+t)/2;p<w?(t=w,e=w*a):(t=p*a,e=p),u=e*t}return{width:e,height:t}}function Ye(R,E){let T,f;try{if(T=new OffscreenCanvas(R,E),f=T.getContext("2d"),f===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{T=document.createElement("canvas"),f=T.getContext("2d")}return T.width=R,T.height=E,[T,f]}function vt(R,E){const{width:T,height:f}=bt(R.width,R.height),[e,t]=Ye(T,f);return E&&/jpe?g/.test(E)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(R,0,0,e.width,e.height),e}function je(){return je.cachedResult!==void 0||(je.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),je.cachedResult}function Ve(R,E={}){return new Promise(function(T,f){let e,t;var u=function(){try{return t=vt(e,E.fileType||R.type),T([e,t])}catch(p){return f(p)}},a=function(p){try{var w=function(r){try{throw r}catch(o){return f(o)}};try{let r;return pt(R).then(function(o){try{return r=o,mt(r).then(function(n){try{return e=n,function(){try{return u()}catch(i){return f(i)}}()}catch(i){return w(i)}},w)}catch(n){return w(n)}},w)}catch(r){w(r)}}catch(r){return f(r)}};try{if(je()||[le.DESKTOP_SAFARI,le.MOBILE_SAFARI].includes(Se()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(R).then(function(p){try{return e=p,u()}catch{return a()}},a)}catch{a()}})}function Xe(R,E,T,f,e=1){return new Promise(function(t,u){let a;if(E==="image/png"){let w,r,o;return w=R.getContext("2d"),{data:r}=w.getImageData(0,0,R.width,R.height),o=ge.encode([r.buffer],R.width,R.height,4096*e),a=new Blob([o],{type:E}),a.name=T,a.lastModified=f,p.call(this)}{let w=function(){return p.call(this)};if(E==="image/bmp")return new Promise(r=>dt.toBlob(R,r)).then((function(r){try{return a=r,a.name=T,a.lastModified=f,w.call(this)}catch(o){return u(o)}}).bind(this),u);{let r=function(){return w.call(this)};if(typeof OffscreenCanvas=="function"&&R instanceof OffscreenCanvas)return R.convertToBlob({type:E,quality:e}).then((function(o){try{return a=o,a.name=T,a.lastModified=f,r.call(this)}catch(n){return u(n)}}).bind(this),u);{let o;return o=R.toDataURL(E,e),tt(o,T,f).then((function(n){try{return a=n,r.call(this)}catch(i){return u(i)}}).bind(this),u)}}}function p(){return t(a)}})}function ve(R){R.width=0,R.height=0}function ke(){return new Promise(function(R,E){let T,f,e,t;return ke.cachedResult!==void 0?R(ke.cachedResult):tt("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(u){try{return T=u,Ve(T).then(function(a){try{return f=a[1],Xe(f,T.type,T.name,T.lastModified).then(function(p){try{return e=p,ve(f),Ve(e).then(function(w){try{return t=w[0],ke.cachedResult=t.width===1&&t.height===2,R(ke.cachedResult)}catch(r){return E(r)}},E)}catch(w){return E(w)}},E)}catch(p){return E(p)}},E)}catch(a){return E(a)}},E)})}function wt(R){return new Promise((E,T)=>{const f=new gt;f.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return E(-2);const u=t.byteLength;let a=2;for(;a<u;){if(t.getUint16(a+2,!1)<=8)return E(-1);const p=t.getUint16(a,!1);if(a+=2,p==65505){if(t.getUint32(a+=2,!1)!=1165519206)return E(-1);const w=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,w);const r=t.getUint16(a,w);a+=2;for(let o=0;o<r;o++)if(t.getUint16(a+12*o,w)==274)return E(t.getUint16(a+12*o+8,w))}else{if((65280&p)!=65280)break;a+=t.getUint16(a,!1)}}return E(-1)},f.onerror=e=>T(e),f.readAsArrayBuffer(R)})}function yt(R,E){const{width:T}=R,{height:f}=R,{maxWidthOrHeight:e}=E;let t,u=R;return isFinite(e)&&(T>e||f>e)&&([u,t]=Ye(T,f),T>f?(u.width=e,u.height=f/T*e):(u.width=T/f*e,u.height=e),t.drawImage(R,0,0,u.width,u.height),ve(R)),u}function At(R,E){const{width:T}=R,{height:f}=R,[e,t]=Ye(T,f);switch(E>4&&E<9?(e.width=f,e.height=T):(e.width=T,e.height=f),E){case 2:t.transform(-1,0,0,1,T,0);break;case 3:t.transform(-1,0,0,-1,T,f);break;case 4:t.transform(1,0,0,-1,0,f);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,f,0);break;case 7:t.transform(0,-1,-1,0,f,T);break;case 8:t.transform(0,-1,1,0,0,T)}return t.drawImage(R,0,0,T,f),ve(R),e}function at(R,E,T=0){return new Promise(function(f,e){let t,u,a,p,w,r,o,n,i,h,_,x,v,O,k,I,D,g,S,c;function l(A=5){if(E.signal&&E.signal.aborted)throw E.signal.reason;t+=A,E.onProgress(Math.min(t,100))}function b(A){if(E.signal&&E.signal.aborted)throw E.signal.reason;t=Math.min(Math.max(A,t),100),E.onProgress(t)}return t=T,u=E.maxIteration||10,a=1024*E.maxSizeMB*1024,l(),Ve(R,E).then((function(A){try{return[,p]=A,l(),w=yt(p,E),l(),new Promise(function(y,U){var m;if(!(m=E.exifOrientation))return wt(R).then((function(d){try{return m=d,F.call(this)}catch(s){return U(s)}}).bind(this),U);function F(){return y(m)}return F.call(this)}).then((function(y){try{return r=y,l(),ke().then((function(U){try{return o=U?w:At(w,r),l(),n=E.initialQuality||1,i=E.fileType||R.type,Xe(o,i,R.name,R.lastModified,n).then((function(m){try{{let d=function(){if(u--&&(k>a||k>v)){let P,C;return P=c?.95*S.width:S.width,C=c?.95*S.height:S.height,[D,g]=Ye(P,C),g.drawImage(S,0,0,P,C),n*=i==="image/png"?.85:.95,Xe(D,i,R.name,R.lastModified,n).then(function(H){try{return I=H,ve(S),S=D,k=I.size,b(Math.min(99,Math.floor((O-k)/(O-a)*100))),d}catch(z){return e(z)}},e)}return[1]},s=function(){return ve(S),ve(D),ve(w),ve(o),ve(p),b(100),f(I)};if(h=m,l(),_=h.size>a,x=h.size>R.size,!_&&!x)return b(100),f(h);var F;return v=R.size,O=h.size,k=O,S=o,c=!E.alwaysKeepResolution&&_,(F=(function(P){for(;P;){if(P.then)return void P.then(F,e);try{if(P.pop){if(P.length)return P.pop()?s.call(this):P;P=d}else P=P.call(this)}catch(C){return e(C)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(m){return e(m)}}).bind(this),e)}catch(U){return e(U)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)})}const zt=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Je;function Qt(R,E){return new Promise((T,f)=>{Je||(Je=function(u){const a=[];return typeof u=="function"?a.push(`(${u})()`):a.push(u),URL.createObjectURL(new Blob(a))}(zt));const e=new Worker(Je);e.addEventListener("message",function(u){if(E.signal&&E.signal.aborted)e.terminate();else if(u.data.progress===void 0){if(u.data.error)return f(new Error(u.data.error)),void e.terminate();T(u.data.file),e.terminate()}else E.onProgress(u.data.progress)}),e.addEventListener("error",f),E.signal&&E.signal.addEventListener("abort",()=>{f(E.signal.reason),e.terminate()}),e.postMessage({file:R,imageCompressionLibUrl:E.libURL,options:{...E,onProgress:void 0,signal:void 0}})})}function ie(R,E){return new Promise(function(T,f){let e,t,u,a,p,w;if(e={...E},u=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=i=>{u=i,typeof a=="function"&&a(u)},!(R instanceof Blob||R instanceof Nt))return f(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(R.type))return f(new Error("The file given is not an image"));if(w=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||w)return at(R,e).then((function(i){try{return t=i,n.call(this)}catch(h){return f(h)}}).bind(this),f);var r=(function(){try{return n.call(this)}catch(i){return f(i)}}).bind(this),o=function(i){try{return at(R,e).then(function(h){try{return t=h,r()}catch(_){return f(_)}},f)}catch(h){return f(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Qt(R,e).then(function(i){try{return t=i,r()}catch{return o()}},o)}catch{o()}function n(){try{t.name=R.name,t.lastModified=R.lastModified}catch{}try{e.preserveExif&&R.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===R.type)&&(t=ut(R,t))}catch{}return T(t)}})}ie.getDataUrlFromFile=pt,ie.getFilefromDataUrl=tt,ie.loadImage=mt,ie.drawImageInCanvas=vt,ie.drawFileInCanvas=Ve,ie.canvasToFile=Xe,ie.getExifOrientation=wt,ie.handleMaxWidthOrHeight=yt,ie.followExifOrientation=At,ie.cleanupCanvasMemory=ve,ie.isAutoOrientationInBrowser=ke,ie.approximateBelowMaximumCanvasSizeOfBrowser=bt,ie.copyExifWithoutOrientation=ut,ie.getBrowserName=Se,ie.version="2.0.2";const $t={class:"p-3"},Wt={class:"flex justify-center"},jt=["src"],Gt={class:"my-4 flex justify-center"},qt=Pe({inheritAttrs:!1,__name:"frame-main",setup(R){const E=Ct(),T=Ft(null),{state:f}=ze(),e=async a=>{const p=a.target;if(!p)return;const[w]=Reflect.get(p,"files");if(!w)return;const r=ee(T);r&&(r.destroy(),T.value=null,await It()),f.result="";const o=await ie.getDataUrlFromFile(w);f.upload=o,f.current=o;const n=ee(E);n&&(await new Promise(i=>n.onload=i),T.value=new it(n,{aspectRatio:1}))},t=async()=>{const a=ee(T);if(!a)return;const p=ee(E);if(p){f.loading=!0;try{const w=a.getCroppedCanvas(),r=await new Promise(m=>{We.fabric.Image.fromURL(w.toDataURL(),m)}),o=await new Promise(m=>{We.fabric.Image.fromURL(f.frame,m)}),n=new We.fabric.Text("YangLee",{fill:"#fff",fontSize:14,fontFamily:Reflect.get(globalThis.getComputedStyle(document.documentElement),"fontFamily")}),i=new We.fabric.Group([r,o,n]),h=i.width||0,_=i.height||0,x=r.width||0,v=r.height||0,O=h/x,k=_/v,I=globalThis.getComputedStyle(p),D=Number.parseInt(Reflect.get(I,"width")),g=Number.parseInt(Reflect.get(I,"height")),S=h/D,c=_/g,l=n.top||0,b=n.left||0;r.set({width:x*.95,scaleX:O,scaleY:k});const A=n.height||0,y=n.width||0;n.set({top:_+l-A*c,left:h+b-y*S,scaleX:S,scaleY:c});const U=i.toDataURL({});f.current=U,f.result=U,a.destroy(),T.value=null}catch(w){console.error(w)}finally{f.loading=!1}}},u=async()=>{f.current=f.upload;const a=ee(E);a&&(await new Promise(p=>a.onload=p),T.value=new it(a,{aspectRatio:1}))};return(a,p)=>(pe(),Ne(ft,null,[lt(fe("div",$t,[fe("div",Wt,[fe("img",{ref_key:"imgRef",ref:E,src:ee(f).current,class:"overflow-hidden w-96 !h-96"},null,8,jt)])],512),[[xt,ee(f).tab!==3&&ee(f).tab!==5]]),fe("div",Gt,[Ae(Pt,{"show-confirm":!!ee(T),onUpload:e,onConfirm:t,onBack:u},null,8,["show-confirm"])])],64))}}),Vt=["disabled","value"],Xt={class:"hidden sm:inline"},st=Pe({inheritAttrs:!1,__name:"frame-tab",props:{label:{},value:{},disabled:{type:Boolean,default:!1}},setup(R){const{state:E}=ze();return(T,f)=>(pe(),Ne("li",{class:ot([ee(E).tab===T.value?"text-black":"text-gray-400",T.disabled?"opacity-25":""])},[fe("label",{class:ot([T.disabled?"cursor-not-allowed":"cursor-pointer","flex","gap-2","text-sm","sm:text-base"])},[Et(T.$slots,"icon"),lt(fe("input",{"onUpdate:modelValue":f[0]||(f[0]=e=>ee(E).tab=e),disabled:T.disabled,type:"radio",value:T.value,hidden:""},null,8,Vt),[[Rt,ee(E).tab]]),fe("span",Xt,ct(T.label),1)],2)],2))}}),Yt={class:"flex justify-between capitalize font-semibold my-0 mb-5 text-sm"},Zt=Pe({inheritAttrs:!1,__name:"frame-tabs",setup(R){const{state:E}=ze();return(T,f)=>{const e=Be("icon-upload"),t=Be("icon-download");return pe(),Ne("ul",Yt,[Ae(st,{value:1,label:"upload"},{icon:ye(()=>[Ae(e,{class:"w-7 sm:w-4"})]),_:1}),Ae(st,{value:2,label:"download",disabled:!ee(E).result},{icon:ye(()=>[Ae(t,{class:"w-7 sm:w-4"})]),_:1},8,["disabled"])])}}}),Kt=R=>(St("data-v-4f09aa13"),R=R(),Mt(),R),Jt={class:"mx-auto max-w-2xl space-y-6"},en={class:"bg-gradient-to-b from-purple-500 to-pink-500"},tn={class:"text-white text-center font-bold text-2xl p-2 my-0"},nn={class:"flex flex-col items-center"},rn={class:"sm:w-10/12 px-2"},on=Kt(()=>fe("div",null,[fe("b",{class:"capitalize"},"notes"),fe("p",{class:"text-gray-500 text-xs mt-1 font-light"}," To protect your rights, please login before submitting photos. If you do not have a Smoant account yet, please click here to register. ")],-1)),an=Pe({inheritAttrs:!0,__name:"frame-dialog",setup(R){const E=ze();return(T,f)=>(pe(),Ne("section",Jt,[fe("div",en,[fe("h2",tn,ct(ee(E).dialogTitle),1)]),fe("div",nn,[fe("div",rn,[Ae(Zt),Ae(qt),on])])]))}}),sn=Tt(an,[["__scopeId","data-v-4f09aa13"]]),dn=Pe({inheritAttrs:!1,__name:"fabric",setup(R){return(E,T)=>(pe(),Te(sn))}});export{dn as default};
