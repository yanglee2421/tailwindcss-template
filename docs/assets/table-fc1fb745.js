var S=Object.defineProperty;var I=(n,e,r)=>e in n?S(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var b=(n,e,r)=>(I(n,typeof e!="symbol"?e+"":e,r),r);import{d as N}from"./pinia-c384ce02.js";import{U as v,v as j,w as M,r as B,y as H,O as t,H as d,z as x,a6 as m,x as P,L as h,u as F}from"./runtime-core.esm-bundler-a475101a.js";import{bl as J}from"./index-8ab77898.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";class A{constructor(){b(this,"id",k());b(this,"site","");b(this,"user","");b(this,"pwd","")}}const D=N("password",()=>{const n=v(L());return{state:n,find:async({site:p,user:o,pwd:i,page:f,size:_})=>{try{const s=n.filter(u=>{const c=u.site.includes(p||""),w=u.user.includes(o||""),y=u.pwd.includes(i||"");return c&&w&&y}),l=s.slice((f-1)*_,f*_);return V({total:s.length,rows:l})}catch{throw new Error("not found")}},findOne:async p=>{try{const o=n.find(i=>i.id===p);if(!o)throw new Error;return o}catch{throw new Error("not found")}},save:async({id:p,site:o,user:i,pwd:f})=>{try{const _=n.find(u=>u.id===s);if(_)return V(Object.assign(_,{site:o,user:i,pwd:f}));const s=k(),l={id:s,site:o,user:i,pwd:f};return n.push(l),V(l)}catch{throw new Error("save error")}},remove:async p=>{try{const o=n.findIndex(i=>i.id===p);if(o===-1)throw new Error;return n.splice(o,1)}catch{throw new Error("can`t delete this id")}}}});function k(){return crypto.randomUUID()}function L(){const n=[{id:k(),site:"4399",user:"4399",pwd:"4399"}];for(let e=0;e<100;e++){const r=new A;r.site="site"+e,r.user="user"+e,r.pwd="pwd"+e,n.push(r)}return n}function V(n){return JSON.parse(JSON.stringify(n))}const T={class:"flex-column"},$={class:"flex-1-hidden mt-1"},G={inheritAttrs:!0},K=j({...G,__name:"table",setup(n){const e=v({site:"",user:"",pwd:"",page:1,size:20}),r=v({rows:[],total:100}),{find:O,remove:z,state:p}=D();M([e,p],async([s],l,u)=>{try{const{rows:c,total:w}=await O(s);r.rows=c,r.total=w}catch(c){J.error(c.message)}},{immediate:!0,flush:"post"});const o=v({model:{site:"",user:"",pwd:""},rules:{}}),i=B(null),f=()=>{var s;(s=i.value)==null||s.validate(l=>{if(!l)return!1;Object.assign(e,o.model)})},_=()=>{var s;(s=i.value)==null||s.resetFields(),Object.assign(e,o.model,{page:1})};return(s,l)=>{const u=m("el-input"),c=m("el-form-item"),w=m("el-button"),y=m("el-form"),g=m("el-table-column"),E=m("el-link"),U=m("el-table"),C=m("el-pagination");return P(),H("div",T,[t(y,{ref:a=>i.value=a,inline:"",model:o.model,rules:o.rules,class:"flex between-stretch"},{default:d(()=>[x("div",null,[t(c,{label:"站点：",prop:"site"},{default:d(()=>[t(u,{modelValue:o.model.site,"onUpdate:modelValue":l[0]||(l[0]=a=>o.model.site=a),modelModifiers:{trim:!0},maxlength:"9","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(c,{label:"账户：",prop:"user"},{default:d(()=>[t(u,{modelValue:o.model.user,"onUpdate:modelValue":l[1]||(l[1]=a=>o.model.user=a),modelModifiers:{trim:!0},maxlength:"9","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(c,{label:"密码：",prop:"pwd"},{default:d(()=>[t(u,{modelValue:o.model.pwd,"onUpdate:modelValue":l[2]||(l[2]=a=>o.model.pwd=a),modelModifiers:{trim:!0},maxlength:"9","show-word-limit":""},null,8,["modelValue"])]),_:1})]),t(c,null,{default:d(()=>[t(w,{onClick:f,type:"primary"},{default:d(()=>[h("查询")]),_:1}),t(w,{onClick:_},{default:d(()=>[h("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"]),x("div",null,[t(w,null,{default:d(()=>[h("添加")]),_:1})]),x("div",$,[t(U,{data:r.rows,height:"100%",border:""},{default:d(()=>[t(g,{type:"selection",align:"center",width:"40"}),t(g,{type:"index",label:"序号",align:"center",width:"60"}),t(g,{label:"Id",prop:"id",align:"center","show-overflow-tooltip":"",sortable:""}),t(g,{label:"站点",prop:"site",align:"center",sortable:""}),t(g,{label:"账户",prop:"user",align:"center",sortable:""}),t(g,{label:"密码",prop:"pwd",align:"center",sortable:""}),t(g,{label:"操作",align:"center",width:"100"},{default:d(({row:a})=>[t(E,{type:"primary"},{default:d(()=>[h("编辑")]),_:1}),t(E,{onClick:Q=>F(z)(a.id),type:"danger"},{default:d(()=>[h("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(C,{"current-page":e.page,"onUpdate:currentPage":l[3]||(l[3]=a=>e.page=a),"page-size":e.size,"onUpdate:pageSize":l[4]||(l[4]=a=>e.size=a),total:r.total,"page-sizes":[20,50,100],layout:"total,prev,pager,next,sizes,jumper"},null,8,["current-page","page-size","total"])])}}});const ee=q(K,[["__scopeId","data-v-6e585f89"]]);export{ee as default};
