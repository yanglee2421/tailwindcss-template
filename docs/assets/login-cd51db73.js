import{b as R,q as k,l as O,d as C,c as M,o as V,k as q,a as P,u as p,R as x,an as d,C as w,D as E,a2 as o,r as A,X as z,Y as l,E as _,a0 as c,Q as F,aE as U,aF as L}from"./vue-0310cf6f.js";import{a as j,S as I,s as N,g as B,n as K,b as D,u as Q,c as T,i as W,d as Y,E as X,_ as G}from"./index-e5a9ed91.js";import{u as H}from"./use-login-64fa0c76.js";import"./axios-2877efd3.js";function J(r){return j({url:"/usr",method:"POST",...r})}class Z extends I{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=this.client.defaultMutationOptions(t),N(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(e=this.currentMutation)==null||e.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const e={listeners:!0};t.type==="success"?e.onSuccess=!0:t.type==="error"&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t<"u"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:B(),e={...t,isLoading:t.status==="loading",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){K.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(t.onSuccess){var e,s,n,a;(e=(s=this.mutateOptions).onSuccess)==null||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(n=(a=this.mutateOptions).onSettled)==null||n.call(a,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var u,i,m,h;(u=(i=this.mutateOptions).onError)==null||u.call(i,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(m=(h=this.mutateOptions).onSettled)==null||m.call(h,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(({listener:y})=>{y(this.currentResult)})})}}function $(r=""){const t=D(r),e=R(t,null);if(!e){var s;throw((s=k())==null?void 0:s.proxy)?new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library."):new Error("vue-query hooks can only be used inside setup() function.")}return e}function tt(r,t,e){var s;const n=O(()=>et(r,t,e)),a=(s=n.value.queryClient)!=null?s:$(n.value.queryClientKey),u=new Z(a,a.defaultMutationOptions(n.value)),i=C(u.getCurrentResult()),m=u.subscribe(f=>{Q(i,f)}),h=(f,v)=>{u.mutate(f,v).catch(()=>{})};M(n,()=>{u.setOptions(a.defaultMutationOptions(n.value))},{flush:"sync"}),V(()=>{m()});const y=q(P(i));return M(()=>i.error,f=>{if(f&&T(n.value.useErrorBoundary,[f]))throw f}),{...y,mutate:h,mutateAsync:i.mutate,reset:i.reset}}function et(r,t,e){const s=p(r),n=p(t);let a=s;return W(s)&&(typeof n=="function"?a={...p(e),mutationKey:s,mutationFn:n}:a={...n,mutationKey:s}),typeof s=="function"&&(a={...n,mutationFn:s}),Y(a)}function st(){const{signIn:r}=H();return tt({mutationFn(t){return J(t)},async onSuccess(t){await r(t)},onError(t){X.error(t.message)}})}const nt={class:"flex justify-center"},ot=x({inheritAttrs:!1,__name:"icon-btn",setup(r){return(t,e)=>{const s=d("el-button");return w(),E("div",nt,[o(s,{icon:"WindPower",size:"large",circle:"",text:"",class:"text-2xl"}),o(s,{icon:"ElementPlus",size:"large",circle:"",text:"",class:"text-2xl"}),o(s,{icon:"SwitchFilled",size:"large",circle:"",text:"",class:"text-2xl"}),o(s,{icon:"ChromeFilled",size:"large",circle:"",text:"",tag:"a",href:"https://github.com/yanglee2421/vite-vue",target:"_blank",class:"text-2xl",title:"github"})])}}}),S=Symbol(),rt={class:"flex justify-between w-full"},it=x({inheritAttrs:!1,__name:"login-form",setup(r){const t=R(S);if(!t)throw new Error("No Provider symbolForm!");const{mutate:e,isLoading:s}=st(),n=A(),a=()=>{var u;(u=p(n))==null||u.validate(i=>{i&&e({data:t})})};return(u,i)=>{const m=d("el-input"),h=d("el-form-item"),y=d("el-checkbox"),f=d("el-button"),v=d("el-form");return w(),z(v,{ref_key:"formRef",ref:n,model:p(t),rules:{},"label-position":"top",size:"large",autocapitalize:"off"},{default:l(()=>[o(h,{prop:"email",rules:[{required:!0},{type:"string",min:8,max:50},{type:"email"}]},{default:l(()=>[o(m,{modelValue:p(t).email,"onUpdate:modelValue":i[0]||(i[0]=g=>p(t).email=g),modelModifiers:{trim:!0},"prefix-icon":"User",type:"email",placeholder:"Email"},null,8,["modelValue"])]),_:1}),o(h,{prop:"passwd",rules:[{required:!0},{type:"string",min:8,max:16}]},{default:l(()=>[o(m,{modelValue:p(t).passwd,"onUpdate:modelValue":i[1]||(i[1]=g=>p(t).passwd=g),modelModifiers:{trim:!0},type:"password","prefix-icon":"Lock","show-password":"",placeholder:"Password"},null,8,["modelValue"])]),_:1}),o(h,{prop:"prop"},{default:l(()=>[_("div",rt,[o(y,null,{default:l(()=>[c("Remember Me")]),_:1}),o(f,{type:"primary",link:""},{default:l(()=>[c("Forgot Password?")]),_:1})])]),_:1}),o(h,null,{default:l(()=>[o(f,{onClick:a,loading:p(s),type:"primary",class:"w-full uppercase bg-none bg-sky-500 font-semibold"},{default:l(()=>[c("sign in")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}}),b=r=>(U("data-v-cd51afb4"),r=r(),L(),r),lt={class:"flex h-full"},at=b(()=>_("div",{class:"flex-1"},null,-1)),ut={class:"w-full md:max-w-lg"},ct=b(()=>_("b",{class:"font-semibold"},"admin@yang.com",-1)),dt=b(()=>_("b",{class:"font-semibold"},"admin123456",-1)),ft=b(()=>_("br",null,null,-1)),pt=b(()=>_("b",{class:"font-semibold"},"client@yang.com",-1)),mt=b(()=>_("b",{class:"font-semibold"},"client123456",-1)),ht={class:"flex justify-center gap-3 w-full"},_t=x({inheritAttrs:!1,__name:"login",setup(r){const t=C({email:"",passwd:"",isRemember:!0});return F(S,t),(e,s)=>{const n=d("el-text"),a=d("el-alert"),u=d("el-button"),i=d("el-divider"),m=d("el-card");return w(),E("div",lt,[at,_("div",ut,[o(m,{class:"flex flex-col justify-center h-full px-3"},{default:l(()=>[o(n,{tag:"h1",size:"large",class:"text-2xl"},{default:l(()=>[c("Wellcome to Yang_Lee!")]),_:1}),o(n,{class:"text-basic text-slate-400"},{default:l(()=>[c("Please sign-in to your account and start the adventure.")]),_:1}),o(a,{closable:!1,class:"my-3"},{default:l(()=>[o(n,{class:"text-gray-500"},{default:l(()=>[c("Admin: "),ct,c(" / Pass: "),dt]),_:1}),ft,o(n,{class:"text-gray-500"},{default:l(()=>[c("Client: "),pt,c(" / Pass: "),mt]),_:1})]),_:1}),o(it),_("div",ht,[o(n,{size:"default"},{default:l(()=>[c("New on out platform?")]),_:1}),o(u,{type:"primary",link:""},{default:l(()=>[c("Create an account")]),_:1})]),o(i,null,{default:l(()=>[c("or")]),_:1}),o(ot)]),_:1})])])}}});const xt=G(_t,[["__scopeId","data-v-cd51afb4"]]);export{xt as default};
