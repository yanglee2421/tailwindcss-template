var S=Object.defineProperty;var j=(n,e,r)=>e in n?S(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var b=(n,e,r)=>(j(n,typeof e!="symbol"?e+"":e,r),r);import{z as I,r as v,d as N,A as M,a as B,i as P,b as t,w as d,j as x,f as m,o as A,e as h,k as F,E as H,_ as J}from"./index-5bd82c16.js";class q{constructor(){b(this,"id",V());b(this,"site","");b(this,"user","");b(this,"pwd","")}}const D=I("password",()=>{const n=v(T());return{state:n,find:async({site:p,user:o,pwd:i,page:f,size:_})=>{try{const s=n.filter(c=>{const u=c.site.includes(p||""),w=c.user.includes(o||""),y=c.pwd.includes(i||"");return u&&w&&y}),l=s.slice((f-1)*_,f*_);return k({total:s.length,rows:l})}catch{throw new Error("not found")}},findOne:async p=>{try{const o=n.find(i=>i.id===p);if(!o)throw new Error;return o}catch{throw new Error("not found")}},save:async({id:p,site:o,user:i,pwd:f})=>{try{const _=n.find(c=>c.id===s);if(_)return k(Object.assign(_,{site:o,user:i,pwd:f}));const s=V(),l={id:s,site:o,user:i,pwd:f};return n.push(l),k(l)}catch{throw new Error("save error")}},remove:async p=>{try{const o=n.findIndex(i=>i.id===p);if(o===-1)throw new Error;return n.splice(o,1)}catch{throw new Error("can`t delete this id")}}}});function V(){return crypto.randomUUID()}function T(){const n=[{id:V(),site:"4399",user:"4399",pwd:"4399"}];for(let e=0;e<100;e++){const r=new q;r.site="site"+e,r.user="user"+e,r.pwd="pwd"+e,n.push(r)}return n}function k(n){return JSON.parse(JSON.stringify(n))}const $={class:"flex-column"},G={class:"flex-1-hidden mt-1"},K={inheritAttrs:!0},L=N({...K,__name:"table",setup(n){const e=v({site:"",user:"",pwd:"",page:1,size:20}),r=v({rows:[],total:100}),{find:O,remove:E,state:p}=D();M([e,p],async([s],l,c)=>{try{const{rows:u,total:w}=await O(s);r.rows=u,r.total=w}catch(u){H.error(u.message)}},{immediate:!0,flush:"post"});const o=v({model:{site:"",user:"",pwd:""},rules:{}}),i=B(null),f=()=>{var s;(s=i.value)==null||s.validate(l=>{if(!l)return!1;Object.assign(e,o.model)})},_=()=>{var s;(s=i.value)==null||s.resetFields(),Object.assign(e,o.model,{page:1})};return(s,l)=>{const c=m("el-input"),u=m("el-form-item"),w=m("el-button"),y=m("el-form"),g=m("el-table-column"),z=m("el-link"),C=m("el-table"),U=m("el-pagination");return A(),P("div",$,[t(y,{ref:a=>i.value=a,inline:"",model:o.model,rules:o.rules,class:"flex between-stretch"},{default:d(()=>[x("div",null,[t(u,{label:"站点：",prop:"site"},{default:d(()=>[t(c,{modelValue:o.model.site,"onUpdate:modelValue":l[0]||(l[0]=a=>o.model.site=a),modelModifiers:{trim:!0},maxlength:"9","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(u,{label:"账户：",prop:"user"},{default:d(()=>[t(c,{modelValue:o.model.user,"onUpdate:modelValue":l[1]||(l[1]=a=>o.model.user=a),modelModifiers:{trim:!0},maxlength:"9","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(u,{label:"密码：",prop:"pwd"},{default:d(()=>[t(c,{modelValue:o.model.pwd,"onUpdate:modelValue":l[2]||(l[2]=a=>o.model.pwd=a),modelModifiers:{trim:!0},maxlength:"9","show-word-limit":""},null,8,["modelValue"])]),_:1})]),t(u,null,{default:d(()=>[t(w,{onClick:f,type:"primary"},{default:d(()=>[h("查询")]),_:1}),t(w,{onClick:_},{default:d(()=>[h("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"]),x("div",null,[t(w,null,{default:d(()=>[h("添加")]),_:1})]),x("div",G,[t(C,{data:r.rows,height:"100%",border:""},{default:d(()=>[t(g,{type:"selection",align:"center",width:"40",fixed:""}),t(g,{type:"index",label:"序号",align:"center",width:"60"}),t(g,{label:"Id",prop:"id",align:"center","show-overflow-tooltip":"",sortable:""}),t(g,{label:"站点",prop:"site",align:"center",sortable:""}),t(g,{label:"账户",prop:"user",align:"center",sortable:""}),t(g,{label:"密码",prop:"pwd",align:"center",sortable:""}),t(g,{label:"操作",align:"center",width:"100",fixed:"right"},{default:d(({row:a})=>[t(z,{type:"primary"},{default:d(()=>[h("编辑")]),_:1}),t(z,{onClick:Q=>F(E)(a.id),type:"danger"},{default:d(()=>[h("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(U,{"current-page":e.page,"onUpdate:currentPage":l[3]||(l[3]=a=>e.page=a),"page-size":e.size,"onUpdate:pageSize":l[4]||(l[4]=a=>e.size=a),total:r.total,"page-sizes":[20,50,100],layout:"total,prev,pager,next,sizes,jumper"},null,8,["current-page","page-size","total"])])}}});const X=J(L,[["__scopeId","data-v-2cb0a6dd"]]);export{X as default};
